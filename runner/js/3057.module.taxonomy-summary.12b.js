"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[3057],{66888:(e,t,n)=>{n.d(t,{Z:()=>i}),n(73964);var a=n(75490);function s(e,t,n,a,s,r,i){try{var o=e[r](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,s)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}const i="ResizeObserver"in window?window.ResizeObserver:class{constructor(e){var t=this;if(this._handleResize=r((function*(){yield(0,a.Os)(),t._node&&t._onResizeEvent([{target:t._node,contentRect:t._node.getBoundingClientRect()}])})),"function"!=typeof e)throw new Error("missing resize handler");this._onResizeEvent=e}observe(e){if(!e instanceof HTMLElement)throw new Error("ResizeObserver only works on HTML elements");if(this._node)throw new Error("ResizeObserver fallback only supports one node");this._node=e,window.addEventListener("resize",this._handleResize),this._handleResize(),(0,a._v)(1e3).then(this._handleResize)}unobserve(e){if(this._node&&this._node!==e)throw new Error("Trying to unobserve the wrong node");this._node=null,window.removeEventListener("resize",this._handleResize)}}},12062:(e,t,n)=>{n.d(t,{Z:()=>d}),n(752),n(76265),n(60429);var a=n(67294),s=n(45697),r=n.n(s),i=n(66888),o=["children","element","measurements","updateCallback"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}class c extends a.PureComponent{constructor(e){super(e),this.state={},this._resizeObserver=new i.Z(this._handleResizeEvent.bind(this)),this._ref=a.createRef()}componentDidMount(){this._resizeObserver.observe(this._ref.current)}componentDidUpdate(){this.props.updateCallback&&this.props.updateCallback()}componentWillUnmount(){this._resizeObserver.unobserve(this._ref.current)}_handleResizeEvent(e){var t;for(var{target:n,contentRect:a}of e)n===this._ref.current&&(t=a);if(t){var s={},{measurements:r}=this.props;for(var i of(Array.isArray(r)||(r=[r]),r))s[i]=t[i];this.setState(s)}}render(){var e=this.props,{children:t,element:n}=e,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o),r=n||"span";return a.createElement(r,l({},s,{ref:this._ref}),t(this.state))}}c.propTypes={element:r().string,children:r().func.isRequired,measurements:r().oneOfType([r().arrayOf(r().string).isRequired,r().string]),updateCallback:r().func};const d=c},81667:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),s=(0,n(76371).Z)({"tag-sqc":"Accession_style__tag-sqc___bf"});const r=e=>{var{withTitle:t,accession:n,title:r}=e;return a.createElement("div",null,""!==r&&t?a.createElement("span",null," ",r||"Accession",":"):null,"Job ID"===r?a.createElement("span",{className:s("tag-sqc")}," ",n):n)}},55814:(e,t,n)=>{n.d(t,{Z:()=>d}),n(752),n(76265);var a=n(67294),s=n(76853),r=n(2191),i=n(3817),o=n(76371),l=n(82806),c=(0,o.Z)(l.Z);const d=e=>{var{element:t,tooltip:n,className:o,dataIcon:l,disabled:d=!1,onFullScreenHook:m=s.Z,onExitFullScreenHook:u=s.Z}=e,[h,p]=(0,a.useState)(null),[v,_]=(0,a.useState)(!1),f=()=>{null===document.fullscreenElement&&(_(!1),u())};if((0,a.useEffect)((()=>(document.addEventListener("fullscreenchange",f),()=>document.removeEventListener("fullscreenchange",f))),[]),(0,a.useEffect)((()=>{p("string"==typeof t?document.getElementById(t):t)}),[t]),!h)return null;var y=o||c("margin-bottom-none","icon","icon-common"),E=l||(v?"icon-fullscreen-collapse":"icon-fullscreen");return a.createElement(r.Z,{title:n},a.createElement(i.Z,{type:"inline",onClick:()=>{v?("exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document?document.webkitExitFullscreen():"mozExitFullScreen"in document?document.mozExitFullScreen():"msExitFullscreen"in document&&document.msExitFullscreen(),u()):(e=>"requestFullscreen"in e?e.requestFullscreen():"webkitRequestFullscreen"in e?e.webkitRequestFullscreen():"mozRequestFullScreen"in e?e.mozRequestFullScreen():"msRequestFullscreen"in e?e.msRequestFullscreen():void 0)(h).then((()=>m())),_(!v)},icon:E,title:n,className:y,disabled:d}))}},79539:(e,t,n)=>{n.r(t),n.d(t,{SummaryTaxonomy:()=>V,default:()=>I,parentRelationship:()=>P}),n(752),n(73964),n(76265),n(64043),n(9873),n(28436),n(86544),n(61514);var a=n(67294),s=n(19119),r=n(8575),i=n(21105),o=n(34287),l=n(10838),c=n(87616),d=n(18677),m=n(85869),u=n(81667),h=n(45697),p=n.n(h),v=(n(12826),n(29643));class _ extends a.PureComponent{render(){var{accession:e,data:t,name:n,element:s}=this.props,r=t&&t.payload&&t.payload.metadata&&t.payload.metadata.name&&t.payload.metadata.name.name||n&&n.short||e;return s?a.createElement(s,null,r):a.createElement(v.Z,{to:{description:{main:{key:"taxonomy"},taxonomy:{db:"uniprot",accession:e.toString()}}}},r)}}_.propTypes={accession:p().oneOfType([p().string,p().number]),data:p().object,element:p().any,name:p().shape({short:p().string})};const f=_;var y=n(3509),E=n(82806),g=(0,y.D)(E.Z);class b extends a.PureComponent{render(){var e=this.props.lineage.trim().split(" "),{names:t,className:n}=this.props;return a.createElement("div",{className:n},e.map((e=>a.createElement("span",{key:e,className:g("icon","icon-common","primary"),"data-icon":""}," ",a.createElement(f,{accession:e,name:t[e]})," "))))}}b.propTypes={lineage:p().string.isRequired,names:p().object,className:p().string};const x=b;var w=n(52727),k=(0,y.D)({"list-children":"Children_style__list-children___ad"}),C=(0,i.Z)({loader:()=>n.e(1169).then(n.bind(n,25392)),loading:()=>null}),N=e=>{var{taxId:t,name:n}=e;return{"@id":"@contains",name:"contains",value:{"@type":["Taxonomy","StructuredValue","BioChemEntity"],name:n,identifier:t,url:w.default.root.website.protocol+w.default.root.website.href+(0,l.Z)({main:{key:"taxonomy"},taxonomy:{db:"uniprot",accession:t}})}}};class Z extends a.PureComponent{render(){var{taxChildren:e,names:t}=this.props;return a.createElement("div",{className:k("list-children")},e.length?e.map((e=>a.createElement("div",{key:e},a.createElement(f,{accession:e,name:t[e]}),a.createElement(C,{data:{taxId:e,name:t[e]},processData:N})))):a.createElement("span",null,"None"))}}Z.propTypes={taxChildren:p().array.isRequired,names:p().object};const F=Z;var T=n(89562),R=n(12898),S=n(76371),O=n(79488),D=n(5931),z=n(44166),L=(0,S.Z)(O.Z,D.Z,z.Z),P=e=>{var{taxId:t,name:n=null}=e;return{"@id":"@additionalProperty","@type":"PropertyValue",additionalType:"http://semanticscience.org/resource/SIO_000095",name:"is member of",value:{"@type":"StructuredValue",additionalType:["bio:Taxon","bio:BioChemEntity"],identifier:t,name:n}}},q=(0,i.Z)({loader:()=>n.e(1169).then(n.bind(n,25392)),loading:()=>null});class V extends a.PureComponent{constructor(){super(...arguments),this.loadingVis=!1,this.state={},this._handleFocus=e=>{this.loadingVis||this.props.goToCustomLocation({description:{main:{key:"taxonomy"},taxonomy:{db:"uniprot",accession:e}}})},this._populateData=e=>{var t,n,a,{metadata:s,names:r,children:i}=e,o=s.lineage.trim().split(/\s+/),l=null,c=null;for(var d of o){var m={name:r[d].short,id:d};c?c.children=[m]:l=m,c=m}c&&(c.name=(null===(t=s.name)||void 0===t?void 0:t.short)||(null===(n=s.name)||void 0===n?void 0:n.name)||s.accession,c.hitcount=null===(a=null==s?void 0:s.counters)||void 0===a?void 0:a.proteins,s.children&&(c.children=s.children.map((e=>{var t;return{name:r[e].short,id:e,hitcount:null===(t=null==i?void 0:i[e])||void 0===t?void 0:t.proteins}}))),this.setState({data:l,focused:""+s.accession}))},this._handleChange=e=>{var t=e.target.value,{customLocation:{description:n}}=this.props;this.props.goToCustomLocation({search:{entry_db:t},description:n})},this._isSelected=e=>{var{customLocation:{search:{entry_db:t}}}=this.props;return(t||"all").toLowerCase()===e.canonical.toLowerCase()}}componentDidMount(){var e;(null===(e=this.props.dataNames)||void 0===e?void 0:e.payload)&&(this.loadingVis=!0,this._populateData(this.props.dataNames.payload),this.loadingVis=!1)}componentDidUpdate(e){var t;e.dataNames!==this.props.dataNames&&(null===(t=this.props.dataNames)||void 0===t?void 0:t.payload)&&(this.loadingVis=!0,this._populateData(this.props.dataNames.payload),this.loadingVis=!1)}render(){var e,t,n;if((null===(e=this.props.dataNames)||void 0===e?void 0:e.loading)||!(null===(n=null===(t=this.props.dataNames)||void 0===t?void 0:t.payload)||void 0===n?void 0:n.metadata))return a.createElement(m.Z,null);var{metadata:s,names:r}=this.props.dataNames.payload,{customLocation:{search:{entry_db:i}}}=this.props;return a.createElement("div",{className:L("vf-stack","vf-stack--400")},a.createElement("section",{className:L("vf-grid","summary-grid")},a.createElement("div",{className:L("vf-stack")},a.createElement("table",{className:L("vf-table","left-headers")},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{maxWidth:"50%"}},"Taxon ID"),a.createElement("td",null,a.createElement(u.Z,{accession:s.accession,title:"Taxon ID"}))),s.rank&&a.createElement("tr",null,a.createElement("td",null,"Rank"),a.createElement("td",{className:L("first-letter-cap")},s.rank)),s.parent&&a.createElement(q,{data:{taxId:s.parent,name:r[s.parent]&&r[s.parent].name},processData:P}),a.createElement("tr",null,a.createElement("td",null,"Lineage"),a.createElement("td",{className:L("ico-primary"),"data-testid":"taxonomy-lineage"},a.createElement(x,{lineage:s.lineage,names:r}))),a.createElement("tr",null,a.createElement("td",null,"Children"),a.createElement("td",{"data-testid":"taxonomy-children"},a.createElement(F,{taxChildren:s.children||[],names:r})))))),a.createElement("div",{className:L("vf-stack")},a.createElement("section",null,a.createElement("h5",null,"External Links"),a.createElement("ul",{className:L("no-bullet")},a.createElement("li",null,a.createElement(R.Z,{id:s.accession,target:"_blank",pattern:"https://www.uniprot.org/taxonomy/{id}",className:L("ext")},"UniProt")))))),a.createElement("div",null,a.createElement(d.Z,{contentType:"taxonomy",filterType:"entry",onChange:this._handleChange,isSelected:this._isSelected,hideCounters:!0},(e=>a.createElement("span",{className:L("header-total-results","margin-bottom-medium",{selector:"boolean"==typeof e,open:e})},"Entry Database: ",i||"All"))),a.createElement(T.Z,{data:this.state.data,focused:this.state.focused,changeFocus:this._handleFocus})))}}var j=(0,s.P1)((e=>e.settings.api),(e=>e.customLocation.description),(e=>e.customLocation.search),((e,t,n)=>{var{protocol:a,hostname:s,port:i,root:o}=e,{entry_db:c}=n,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n}(n,["entry_db"]);return Object.values(t).some((e=>!!e.isFilter))||!c||"all"===c?d.with_names=!0:d.filter_by_entry_db=c,(0,r.format)({protocol:a,hostname:s,port:i,pathname:o+(0,l.Z)(t),query:d})}));const I=(0,o.Z)({getUrl:j,propNamespace:"Names",mapDispatchToProps:{goToCustomLocation:c.xb}})(V)},89562:(e,t,n)=>{n.d(t,{Z:()=>y}),n(64043),n(61514);var a=n(67294),s=n(19119),r=n(45007),i=n(38755),o=n(2191),l=n(55814),c=n(12062),d=n(95744),m=n(29478),u=n(76371);const h={buttons:"Tree_style__buttons___d8",fullscreen:"Tree_style__fullscreen___d7",container:"Tree_style__container___a1",node:"Tree_style__node___d8","in-path":"Tree_style__in-path___db",tree:"Tree_style__tree___d8"};var p=n(82806),v=(0,u.Z)(h,p.Z);class _ extends a.PureComponent{constructor(e){super(e),this._loadingVis=!1,this._vis=null,this._handleClick=()=>this.setState((e=>{var{fisheye:t}=e;return{fisheye:!t}})),this._recenter=()=>{var e;null===(e=this._vis)||void 0===e||e.resetZoom()},this._handleFocus=e=>{var{detail:{id:t}}=e;!this._loadingVis&&this.props.changeFocus&&this.props.changeFocus(t)},this._handleLabelClick=e=>{var{detail:{id:t}}=e;!this._loadingVis&&this.props.labelClick?this.props.labelClick(t):this._handleFocus(e)},this._populateData=(e,t)=>{this._vis&&(this._vis.data=e,this._vis.focusNodeWithID(t))};var t=!!e.initialFisheye,n=e.search;this._ref=a.createRef(),this.state={fisheye:t,searchTerm:n,isFullScreen:!1}}static getDerivedStateFromProps(e,t){var{search:n}=e,{searchTerm:a}=t;return n!==a?{searchTerm:n}:null}componentDidMount(){this._vis=new i.Z(void 0,{initialMaxNodes:1/0,fisheye:this.state.fisheye,fixedNodeSize:5,classnames:{inPath:h["in-path"],node:h.node},enableZooming:!0,useCtrlToZoom:!0,searchTerm:this.props.search,highlightColor:"#094EEE"}),this._vis.addEventListener("focus",this._handleFocus),this._vis.addEventListener("click",this._handleLabelClick),this._vis.tree=this._ref.current,this._loadingVis=!0,this._populateData(this.props.data,this.props.focused),this._loadingVis=!1}componentDidUpdate(e){var{data:t,focused:n}=e;t!==this.props.data&&(this._loadingVis=!0,this._populateData(this.props.data,this.props.focused),this._loadingVis=!1),this._vis&&(n!==this.props.focused&&this._vis.focusNodeWithID(this.props.focused),this._vis.searchTerm=this.state.searchTerm,this._vis.fisheye=this.state.fisheye)}componentWillUnmount(){var e;null===(e=this._vis)||void 0===e||e.cleanup()}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:h.buttons},a.createElement("span",{className:h.fullscreen},a.createElement(l.Z,{element:"treeDiv",tooltip:"View the taxonomy tree in full screen mode",onFullScreenHook:()=>requestAnimationFrame((()=>this.setState({isFullScreen:!0}))),onExitFullScreenHook:()=>this.setState({isFullScreen:!1})})),this.props.hideToggle?null:a.createElement("span",null,a.createElement(o.Z,{title:"toggle fisheye view"},a.createElement("button",{onClick:this._handleClick},a.createElement("img",{src:this.state.fisheye?d:m,alt:"toggle-fisheye"})))),a.createElement("span",null,a.createElement(o.Z,{title:"Recenter"},a.createElement("button",{onClick:this._recenter,className:v("icon","icon-common","font-l"),"data-icon":""})))),a.createElement(c.Z,{measurements:["width"],element:"div"},(e=>{var{width:t}=e;return a.createElement("div",{className:h.tree,"data-testid":"data-tree",id:"treeDiv"},a.createElement("svg",{className:h.container,ref:this._ref,style:{flex:"1"},width:this.state.isFullScreen?window.screen.width:100*Math.floor((t||600)/100)}))})))}}_.defaultProps={initialFisheye:!0};var f=(0,s.P1)((e=>e.customLocation.search.search),(e=>({search:e})));const y=(0,r.$j)(f)(_)}}]);
//# sourceMappingURL=3057.module.taxonomy-summary.12b.js.map