name: test_and_build
on: [push, pull_request]

jobs:
  quick-push:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/dev' || github.ref == 'refs/heads/staging' || github.ref == 'refs/heads/master' || github.ref == 'refs/heads/runner'
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Create Temp File in Runner Folder
        run: |
          mkdir -p runner
          TEMP_FILE="runner/temp_${{ github.ref_name }}2.txt"
          echo "Temporary file for ${{ github.ref_name }} branch" > $TEMP_FILE

      - name: Commit and Push Temp File as User
        run: |
          git config user.name "${{ secrets.COMMIT_USER_NAME }}"
          git config user.email "${{ secrets.COMMIT_USER_EMAIL }}"
          git add runner/temp_${{ github.ref_name }}2.txt
          git commit -m "Add temp file for ${{ github.ref_name }}"
          git push origin deploy
        token: ${{ secrets.GITHUB_TOKEN }}



# - name: ğŸ“ˆ - Create Reports
#   run: |
#     npm run report
#   env:
#     LHCI_GITHUB_APP_TOKEN: ${{ secrets.LHCI_GITHUB_APP_TOKEN }}
# - name: ğŸ’¾ Archive reports
#   uses: actions/upload-artifact@v4
#   with:
#     name: reports
#     path: |
#       reports/
#       .lighthouseci/
# - name: ğŸ§¥â€ - Coveralls
#   uses: coverallsapp/github-action@master
#   continue-on-error: true
#   with:
#     github-token: ${{ secrets.GITHUB_TOKEN }}
#     path-to-lcov: './reports/jest-coverage/lcov.info'




# - name: ğŸ“ˆ - Create Reports
#   run: |
#     npm run report
#   env:
#     LHCI_GITHUB_APP_TOKEN: ${{ secrets.LHCI_GITHUB_APP_TOKEN }}
# - name: ğŸ’¾ Archive reports
#   uses: actions/upload-artifact@v4
#   with:
#     name: reports
#     path: |
#       reports/
#       .lighthouseci/
# - name: ğŸ§¥â€ - Coveralls
#   uses: coverallsapp/github-action@master
#   continue-on-error: true
#   with:
#     github-token: ${{ secrets.GITHUB_TOKEN }}
#     path-to-lcov: './reports/jest-coverage/lcov.info'