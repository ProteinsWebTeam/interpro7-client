"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[8053],{12898:(e,t,a)=>{a.d(t,{Z:()=>s}),a(64043),a(57267),a(76801),a(43843),a(60429);var n=a(67294),r=a(29643),o=e=>{var{id:t,pattern:a,href:o,to:s,rel:i,className:c,children:l,activeClass:m}=e,u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["id","pattern","href","to","rel","className","children","activeClass"]),d={href:o||s||(a||"").replace("{id}",String(t))};return c&&(d.className=c),i?(d.rel=i.includes("noopener")?i:i+" noopener",d.rel=i.includes("noreferrer")?i:i+" noreferrer"):d.rel="noopener noreferrer",n.createElement(r.Z,Object.assign({},u,d),l)};o.displayName="BaseLink";const s=o},99972:(e,t,a)=>{a.d(t,{Z:()=>s}),a(64043),a(57267),a(60429);var n=a(67294),r=a(12898),o=e=>{var{id:t,target:a,className:o,children:s}=e,i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["id","target","className","children"]),c="string"==typeof t?t.replace("_",":"):t;return n.createElement(r.Z,Object.assign({id:c,target:a||"_blank",pattern:"https://www.ebi.ac.uk/QuickGO/GTerm?id={id}"},o?{className:o}:{},i),s||c)};o.displayName="GoLink";const s=o},38588:(e,t,a)=>{a.d(t,{Z:()=>v}),a(752),a(76265),a(73964),a(278),a(76801),a(43843),a(64043),a(57267);var n=a(67294),r=a(2191),o=a(99972),s=a(21105),i=a(76371),c=a(15655),l=a(44166),m=(0,i.Z)(c.Z,l.Z),u=new Map([["biological_process","bp"],["molecular_function","mf"],["cellular_component","cc"]]),d=(0,s.Z)({loader:()=>a.e(1169).then(a.bind(a,25392)),loading:()=>null}),p=e=>({"@type":"DataRecord","@id":"@seeAlso",identifier:e});const v=e=>{var{terms:t,type:a,db:s,withoutTitle:i=!1}=e,c=new Map(t.map((e=>[e.identifier,e]))),l=Array.from(c.values()).reduce(((e,t)=>{t.category_name&&t.category_code&&(t.category={name:t.category_name,code:t.category_code});var a=t.category.name;return Object.keys(e).includes(a)&&e[a].push(t),e}),{biological_process:[],molecular_function:[],cellular_component:[]}),v="GO terms, ",f="GO terms";"entry"===a&&void 0!==s?"interpro"===s.toLowerCase()?v+="annotated by InterPro curators":(v+="as provided by "+s,f=s+" "+f):(v+="as provided by the InterPro2GO pipeline",f="InterPro "+f);var g=Object.entries(l),h=g.every((e=>{var[,t]=e;return!t.length}));return n.createElement("section",{"data-testid":"go-terms"},!i&&n.createElement("div",{className:m("vf-stack")},n.createElement(r.Z,{title:v},n.createElement("h4",{className:m("title")},f))),n.createElement("div",{className:m("vf-stack")},n.createElement("div",{className:m("go-columns")},h?n.createElement("p",null,"No GO Terms"):g.map((e=>{var[t,a]=e;return n.createElement("div",{key:t},n.createElement("p",{className:m(u.get(t),"go-title")},t.replace("_"," ")),n.createElement("ul",{className:m("go-list")},a&&a.length?a.map((e=>{var{identifier:t,name:a}=e;return n.createElement("li",{key:t},n.createElement(d,{data:t,processData:p}),n.createElement(o.Z,{id:t,className:m("go-terms","ext-link")},a," (",t,")"))})):n.createElement("li",{className:m("no-goterm")},"None")))})))))}},34494:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B}),a(752),a(76265),a(64043),a(60429),a(61514),a(78730),a(79307),a(76801),a(86544);var n=a(67294),r=a(45007),o=a(19119),s=a(8575),i=a(87616),c=a(72004),l=a(10838),m=a(53322),u=a(29643),d=a(2191),p=a(85869),v=a(15039),f=a(38588),g=a(81667),h=a(94583),y=a(1809),b=a(57591),_=a(41089),E=a(5138),O=a(98296),j=a(65455),w=a(76371),Z=a(82806),L=a(5931),N=(0,w.Z)(L.Z,Z.Z),T=(0,o.P1)((e=>e.customLocation),(e=>({customLocation:e})));const k=(0,r.$j)(T,{goToCustomLocation:i.xb})((e=>{var{payload:t,orf:a,customLocation:r,goToCustomLocation:o}=e;if(!t||!r)return n.createElement(p.Z,{inline:!0});var s=t;if(s.openReadingFrames&&"number"==typeof a){var i=s.openReadingFrames[a];return n.createElement(n.Fragment,null,n.createElement(j.Z,{type:"info",showIcon:!0,icon:"icon-dna"},n.createElement("b",null,"Nucleotide Sequence"),n.createElement("div",null,"This analysis was the result of an InterProScan execution over a nucleotide sequence. The data below correspond to a single ORF from such sequence.")),n.createElement("section",{className:N("summary-row")},n.createElement("header",null,"DNA Sequence ID"),n.createElement("section",null,s.crossReferences[0].id)),n.createElement("section",{className:N("summary-row")},n.createElement("header",null,"Current ORF"),n.createElement("section",null,n.createElement("select",{onChange:e=>{var t=e.target.value;null==o||o(Object.assign(Object.assign({},r),{search:Object.assign(Object.assign({},r.search),{orf:t})}))},value:a},s.openReadingFrames.map(((e,t)=>n.createElement("option",{key:t,value:t},e.strand,": ",e.start," - ",e.end)))))),n.createElement("section",{className:N("summary-row")},n.createElement("header",null,"Open Reading Frame"),n.createElement("section",null,n.createElement("section",{className:N("summary-row")},n.createElement("header",null,"Location"),n.createElement("section",null,n.createElement(u.Z,{to:e=>{var{description:t}=e;return{description:Object.assign(Object.assign({},t),{[t.main.key]:Object.assign(Object.assign({},t[t.main.key]),{detail:"sequence"})}),search:{orf:a},hash:"nucleotides"}}},i.start,"-",i.end))),n.createElement("section",{className:N("summary-row")},n.createElement("header",null,"Strand"),n.createElement("section",null,i.strand)))))}return null}));var C=a(33594),S=a(12728),P=(a(65137),a(66830)),R=a(30673),I=["funfam"],x=["pirsr"],G=e=>e.locations.map((t=>{var a,n,r,o,{sites:s}=t;return s?{accession:(null===(a=null==e?void 0:e.signature)||void 0===a?void 0:a.accession)||(null==e?void 0:e.accession),locations:s.map((e=>({description:(e.label||"")+(e.label?": ":"")+e.description,fragments:e.siteLocations}))),type:"residue",source_database:(null===(o=null===(r=null===(n=null==e?void 0:e.signature)||void 0===n?void 0:n.signatureLibraryRelease)||void 0===r?void 0:r.library)||void 0===o?void 0:o.toLowerCase())||e.source_database}:null})).filter(Boolean),q=e=>{var t=1/0,a=-1/0;return e.fragments.forEach((e=>{t=Math.min(t,e.start),a=Math.max(a,e.end)})),[t,a]},D=a(93648),A=(0,w.Z)(L.Z,Z.Z,D.Z),M=(0,c.Z)({method:"GET",responseType:"JSON"}),F=(0,o.P1)((e=>e.customLocation.description.result.job),(e=>e.jobs),((e,t)=>Object.values(t||{}).find((t=>t.metadata.remoteID===e||t.metadata.localID===e)))),U=(0,o.P1)((e=>e.customLocation),(e=>e.customLocation.description.result.job||""),(e=>e.customLocation.description.result.accession||""),F,(e=>e.customLocation.search.orf),(e=>e.settings.api),(e=>e.settings.ipScan),((e,t,a,n,r,o,s)=>{var i,c,l;return{customLocation:e,jobAccession:t,seqAccession:a,jobType:"n"===(null==n?void 0:n.metadata.seqtype)?"n":"p",orf:void 0!==r?Number(r):void 0,localID:(null===(i=null==n?void 0:n.metadata)||void 0===i?void 0:i.localID)||"",remoteID:(null===(c=null==n?void 0:n.metadata)||void 0===c?void 0:c.remoteID)||"",status:null===(l=null==n?void 0:n.metadata)||void 0===l?void 0:l.status,api:o,ipScan:s}}));const B=(0,r.$j)(U,{goToCustomLocation:i.xb})((e=>{var t,a,{jobAccession:r,seqAccession:o,jobType:i,status:c,data:j,localPayload:w,api:Z,ipScan:L,orf:N,customLocation:T,goToCustomLocation:D}=e,[F,U]=(0,n.useState)({}),[B,J]=(0,n.useState)([]);if((0,n.useEffect)((()=>{"n"===i&&void 0===N&&(null==D||D(Object.assign(Object.assign({},T),{search:Object.assign(Object.assign({},T.search),{orf:0})}),!0))}),[N]),(0,n.useEffect)((()=>{if(j.payload||w){var e=j.payload?j.payload.results[0]:w;if("n"===i){if(void 0===N)return;e.openReadingFrames&&(e=e.openReadingFrames[N].protein,J([]))}var t=e,a=((e,t)=>{var a,n,r,o={unintegrated:[],other_features:[],residues:[],other_residues:[],representative_domains:[]},s={},i={},c=new Map,l=new Map,m=[],u=function(e){var{library:u}=e.signature.signatureLibraryRelease,d={accession:e.signature.accession,name:e.signature.description||e.signature.name,short_name:e.signature.name,source_database:(0,R.V6)(u),protein_length:t||0,locations:e.locations.map((t=>Object.assign(Object.assign({},t),{model_acc:e["model-ac"],fragments:t["location-fragments"]&&t["location-fragments"].length?t["location-fragments"]:[{start:t.start,end:t.end}]}))),score:e.score,residues:void 0,signature:void 0},p=G(e);if(p.length>0&&!x.includes((null===(a=null==p?void 0:p[0])||void 0===a?void 0:a.source_database)||"")&&o.residues.push(Object.assign(Object.assign({},d),{accession:"residue:"+d.accession,residues:p})),P.NQ.has(u))return d.source_database=u,d.accession in i?i[d.accession].locations.push(...d.locations):i[d.accession]=d,1;var v,f,g=(f=d,(v=l.get(d.accession))?(v.locations=v.locations.concat(null==f?void 0:f.locations),v):f);if(l.set(g.accession,g),e.signature.entry)((e,t,a)=>{var n=t.accession,r=a.get(n)||{accession:n,name:t.description,short_name:t.name,source_database:"interpro",_children:{},children:[],type:t.type.toLowerCase()};r._children[e.accession]=e,r.children=Object.values(r._children),a.set(n,r)})(g,e.signature.entry,c);else if(I.includes(g.source_database))o.other_features.push(g);else if(x.includes(g.source_database)){var h=G(g);h[0]&&0!==h[0].locations.length&&o.other_residues.push(h[0])}else s[g.accession]=g;var y=d.locations.filter((e=>e.representative));y.length&&m.push(Object.assign(Object.assign({},d),{locations:y,integrated:null===(r=null===(n=e.signature)||void 0===n?void 0:n.entry)||void 0===r?void 0:r.accession}))};for(var d of e)u(d);o.unintegrated=Object.values(s),o.other_features.push(...Object.values(i));var p=Array.from(c.values()).map((e=>{var t=(e=>{var t=[];e.forEach((e=>{var{locations:a}=e;t.push(...a.map(q))})),t.sort(((e,t)=>e[0]>t[0]?1:e[0]<t[0]||e[1]<t[1]?-1:1));var a=[],n=null;return t.forEach((e=>{var[t,r]=e;if(null!==n){var[o,s]=n;r<=s||(t<=s?Math.min(s,r)-Math.max(o,t)+1>=.1*(Math.min(s-o,r-t)+1)&&(n[1]=r):(a.push([...n]),n=[t,r]))}else n=[t,r]})),a.push([...n||[0,0]]),a.map((e=>{var[t,a]=e;return{fragments:[{start:t,end:a}]}}))})(e.children);return Object.assign(Object.assign({},e),{locations:t})}));for(var v of(o.unintegrated.sort(((e,t)=>t.score-e.score)),p))o[v.type]||(o[v.type]=[]),o[v.type].push(v);return(null==m?void 0:m.length)&&(o.representative_domains=m),o})(t.matches,t.sequenceLength);if(U(a),a.family){var n=[];a.family.forEach((e=>{M(((e,t)=>{var{protocol:a,hostname:n,port:r,root:o}=e,i={main:{key:"entry"},entry:{db:"interpro",accession:t}};return(0,s.format)({protocol:a,hostname:n,port:r,pathname:o+(0,l.Z)(i)})})(Z,e.accession)).then((e=>{var t=null==e?void 0:e.payload;(null==t?void 0:t.metadata)&&(n.push(t.metadata),J([...n]))}))}))}}}),[j.payload,w,N]),"n"===i&&void 0===N)return null;var $=j.payload?j.payload.results[0]:w;if(!$||!c)return n.createElement(p.Z,null);var X=Object.assign({},$);j.payload&&(X["interproscan-version"]=null===(t=j.payload)||void 0===t?void 0:t["interproscan-version"]),"n"===i&&(X=Object.assign(Object.assign({},X),X.openReadingFrames[N].protein));var H=X,Q=((e,t)=>{var a,n=null===(a=null==e?void 0:e.times)||void 0===a?void 0:a.created;if(!n){var r=/iprscan5-[SRI](\d{4})(\d{2})(\d{2})-(\d{2})(\d{2})(\d{2})-\d{4}-\d+-\w{2,4}/.exec(t);if(r){var[o,s,i,c,l,m,u]=r;n=Date.UTC(+s,+i-1,+c,+l,+m,+u)}}return n})(H,r),V={accession:r,length:H.sequence.length,sequence:H.sequence,name:{name:"InterProScan Search Result",short:H.xref[0].name}},z=(e=>{var t=new Map;for(var a of e)for(var{id:n,category:r,name:o}of(a.signature.entry||{}).goXRefs||[])t.set(n,{category:{name:r.toLowerCase(),code:r[0]},name:o,identifier:n});return Array.from(t.values())})(H.matches),K=(e=>{var t=new Map;for(var a of e){var n=a.signature.signatureLibraryRelease.library.toLowerCase(),r=a.goXRefs||[];"panther"===n&&0!==r.length&&r.forEach((e=>{var{id:a,category:n,name:r}=e;null!==n&&null!==r&&t.set(a,{category:{name:n.toLowerCase(),code:n[0]},name:r,identifier:a})}))}return Array.from(t.values())})(H.matches),{protocol:W,hostname:Y,root:ee}=L,te=W+"//"+Y+ee+"result",ae=Date.now(),ne=ae-(Q||ae)>m.G&&"saved in browser"===c||"imported file"===c;if(ne){var re=JSON.stringify(H),oe=new Blob([re],{type:"application/json"});te=URL.createObjectURL(oe)}var se=/(.+)(-\d+)$/.exec(r),ie=null!==(a=null==se?void 0:se[1])&&void 0!==a?a:r;return n.createElement("div",{className:A("sections")},n.createElement("section",null,n.createElement(O.Z,{ipScanVersion:X["interproscan-version"]}),n.createElement(C.Z,{type:"sequence",accession:o,payload:H,status:c,editable:"n"!==i}),n.createElement("section",{className:A("summary-row")},n.createElement("header",null,"Job ID"," ",n.createElement(d.Z,{title:"Case sensitive"},n.createElement("span",{className:A("small","icon","icon-common"),"data-icon":"","aria-label":"Case sensitive"}))),n.createElement("section",{style:{display:"flex"}},n.createElement(u.Z,{to:{description:{main:{key:"result"},result:{job:r,type:"InterProScan"}}}},n.createElement(g.Z,{accession:r,title:"Job ID"})," "),n.createElement(v.Z,{textToCopy:(0,E.getIProScanURL)(r),tooltipText:"Copy URL"}))),n.createElement("section",{className:A("summary-row")},n.createElement("header",null,"Status"),n.createElement("section",null,n.createElement(S.Z,{status:c}))),n.createElement(k,{payload:$,orf:N}),n.createElement("section",{className:A("summary-row")},n.createElement("header",null,"Sequence Length"),n.createElement("section",null,n.createElement(y.Z,{metadata:V,orf:N}))),n.createElement("section",{className:A("summary-row")},n.createElement("header",null,"Protein family membership"),n.createElement("section",null,B.length?n.createElement(h.Z,{entries:B}):n.createElement("p",{className:A("margin-bottom-medium")},"None predicted")))),["finished","imported file","saved in browser"].includes(c)&&n.createElement(n.Fragment,null,n.createElement(b.ZP,{mainData:{metadata:V},dataMerged:F,loading:!1},n.createElement(_.uX,{includeSettings:!1},n.createElement("ul",null,["tsv","json","xml","gff","sequence"].map((e=>n.createElement("li",{key:e},n.createElement(u.Z,{target:"_blank",href:ne?te:te+"/"+ie+"/"+e,buttonType:"secondary",download:"InterProScan."+e,disabled:ne&&"json"!==e},e.toUpperCase()))))))),n.createElement(f.Z,{terms:z,type:"protein"}),n.createElement(f.Z,{terms:K,type:"entry",db:"PANTHER"})))}))},1809:(e,t,a)=>{a.d(t,{Z:()=>o}),a(86544),a(60429);var n=a(67294),r=a(29643);const o=e=>{var t,{metadata:{length:a,fragment:o},orf:s}=e;return o&&(t=" ("+("N"===o?"complete":"fragment")+")"),n.createElement(r.Z,{to:e=>{var{description:t}=e;return{description:Object.assign(Object.assign({},t),{[t.main.key]:Object.assign(Object.assign({},t[t.main.key]),{detail:"sequence"})}),search:{orf:s}}}},a," amino acids",t)}},94583:(e,t,a)=>{a.d(t,{Z:()=>f}),a(73964),a(752),a(76265),a(64043),a(57267),a(52003),a(12826);var n=a(67294),r=a(45007),o=a(19119),s=a(31793),i=a(87616),c=a(4267),l=a(25070),m=a(52727),u=[],d=e=>{var{hierarchy:t,accessions:a,hrefroot:r,goToCustomLocation:o,ready:i,includeChildren:c=!1}=e,u=(0,n.useRef)(null);return(0,n.useEffect)((()=>{var e;if(u.current&&i){if((0,s.Z)(null===(e=u.current)||void 0===e?void 0:e._hierarchy,t))return;u.current.hierarchy=t,u.current.addEventListener("click",(e=>{var t,a=e.composedPath()[0];a.classList.contains("link")&&(e.preventDefault(),null==o||o({description:(0,l.Z)(null===(t=(null==a?void 0:a.getAttribute("href"))||"")||void 0===t?void 0:t.replace(new RegExp("^"+m.default.root.website.path),""))}))}))}})),n.createElement("interpro-hierarchy",{accessions:a,hrefroot:r,ref:u,displaymode:"pruned"+(c?"":" no-children")})},p=e=>{var{entries:t,goToCustomLocation:r,includeChildren:o=!1}=e,[s,i]=(0,n.useState)(!1);function l(){return e=this,t=void 0,r=function*(){return yield(()=>{if(!u.length){var e=()=>a.e(5085).then(a.bind(a,93841));u.push((0,c.Z)((()=>e().then((e=>e.InterproHierarchy)))).as("interpro-hierarchy")),u.push((0,c.Z)((()=>e().then((e=>e.InterproEntry)))).as("interpro-entry")),u.push((0,c.Z)((()=>e().then((e=>e.InterproType)))).as("interpro-type"))}return Promise.all(u)})()},new((n=void 0)||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}(0,n.useEffect)((()=>{l().then((()=>{i(!0)}))}),[]);var p=(e=>Array.from(new Map(e.map((e=>[e.accession,e]))).values()))(t.map((e=>e.hierarchy)).filter(Boolean));return s?n.createElement("div",null,p.length?p.map((e=>n.createElement(d,{hierarchy:e,accessions:t.map((e=>e.accession)),hrefroot:m.default.root.website.path+"/entry/interpro",goToCustomLocation:r,key:e.accession,ready:s,includeChildren:o}))):null):null},v=(0,o.P1)((e=>e.settings.api),(e=>({api:e})));const f=(0,r.$j)(v,{goToCustomLocation:i.xb})(n.memo(p))},15655:(e,t,a)=>{a.d(t,{Z:()=>n});const n={title:"GoTerms_style__title___a6","go-list":"GoTerms_style__go-list___ce","go-terms":"GoTerms_style__go-terms___b9","go-title":"GoTerms_style__go-title___f6","no-goterm":"GoTerms_style__no-goterm___c5",bp:"GoTerms_style__bp___b4",mf:"GoTerms_style__mf___c3",cc:"GoTerms_style__cc___e5","go-columns":"GoTerms_style__go-columns___b2",link:"GoTerms_style__link___ad"}}}]);
//# sourceMappingURL=8053.module.ipscan-summary.c2c.js.map