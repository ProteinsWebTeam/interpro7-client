"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[8810],{81667:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(67294),a=(0,n(76371).Z)({"tag-sqc":"Accession_style__tag-sqc___bf"});const i=e=>{var{withTitle:t,accession:n,title:i}=e;return r.createElement("div",null,""!==i&&t?r.createElement("span",null," ",i||"Accession",":"):null,"Job ID"===i?r.createElement("span",{className:a("tag-sqc")}," ",n):n)}},55814:(e,t,n)=>{n.d(t,{Z:()=>u}),n(752),n(76265);var r=n(67294),a=n(76853),i=n(2191),s=n(3817),c=n(76371),o=n(82806),l=(0,c.Z)(o.Z);const u=e=>{var{element:t,tooltip:n,className:c,dataIcon:o,disabled:u=!1,onFullScreenHook:d=a.Z,onExitFullScreenHook:m=a.Z}=e,[p,h]=(0,r.useState)(null),[v,_]=(0,r.useState)(!1),f=()=>{null===document.fullscreenElement&&(_(!1),m())};if((0,r.useEffect)((()=>(document.addEventListener("fullscreenchange",f),()=>document.removeEventListener("fullscreenchange",f))),[]),(0,r.useEffect)((()=>{h("string"==typeof t?document.getElementById(t):t)}),[t]),!p)return null;var y=c||l("margin-bottom-none","icon","icon-common"),b=o||(v?"icon-fullscreen-collapse":"icon-fullscreen");return r.createElement(i.Z,{title:n},r.createElement(s.Z,{type:"inline",onClick:()=>{v?("exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document?document.webkitExitFullscreen():"mozExitFullScreen"in document?document.mozExitFullScreen():"msExitFullscreen"in document&&document.msExitFullscreen(),m()):(e=>"requestFullscreen"in e?e.requestFullscreen():"webkitRequestFullscreen"in e?e.webkitRequestFullscreen():"mozRequestFullScreen"in e?e.mozRequestFullScreen():"msRequestFullscreen"in e?e.msRequestFullscreen():void 0)(p).then((()=>d())),_(!v)},icon:b,title:n,className:y,disabled:u}))}},6226:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(67294),a=n(45007),i=n(19119),s=n(87616),c=n(2191),o=(0,i.P1)((e=>e.settings.ui),(e=>({isPIPEnabled:!!e.isPIPEnabled})));const l=(0,a.$j)(o,{changeSettingsRaw:s.Ft})((e=>{var{isPIPEnabled:t,changeSettingsRaw:n,className:a}=e,i=(t?"Disable":"Enable")+" The Picture In Picture functionality";return r.createElement(c.Z,{title:i},r.createElement("button",{className:a,onClick:()=>{n("ui","isPIPEnabled",!t)},"data-icon":"",title:i,style:{color:t?void 0:"#bbb"}}))}))},59500:(e,t,n)=>{n.d(t,{Z:()=>m}),n(73964),n(752),n(76265);var r=n(67294),a=n(45007),i=n(19119),s=n(47583),c=n(76371),o=n(82806),l=(0,c.Z)({wrapper:"PictureInPicturePanel_style__wrapper___c5",content:"PictureInPicturePanel_style__content___e7","control-bar":"PictureInPicturePanel_style__control-bar___c7",controls:"PictureInPicturePanel_style__controls___b2","is-stuck":"PictureInPicturePanel_style__is-stuck___c4","structure-viewer-select":"PictureInPicturePanel_style__structure-viewer-select___f5","structure-icon":"PictureInPicturePanel_style__structure-icon___fe","is-minimized":"PictureInPicturePanel_style__is-minimized___b9","structure-viewer-ref":"PictureInPicturePanel_style__structure-viewer-ref___be"},o.Z),u={root:null,rootMargin:"0px",threshold:Array.from(Array(10)).map(((e,t)=>(t+1)/10))},d=(0,i.P1)((e=>e.settings.ui),(e=>({isPIPEnabled:!!e.isPIPEnabled})));const m=(0,a.$j)(d)((e=>{var{className:t,hideBar:n=!1,OtherControls:a={bottom:null,top:null},OtherButtons:i=null,onChangingMode:c=(()=>null),isPIPEnabled:o=!0,children:d}=e,[m,p]=(0,r.useState)(!1),[h,v]=(0,r.useState)(!1),_=(0,r.useRef)(null),f=null;return(0,r.useEffect)((()=>{var e,t,n,r;e=void 0,t=void 0,r=function*(){return yield(0,s.oS)()},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{o(r.next(e))}catch(e){i(e)}}function c(e){try{o(r.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}o((r=r.apply(e,t||[])).next())}))}),[]),(0,r.useEffect)((()=>{if(null==_?void 0:_.current){var e=_.current;(f=new IntersectionObserver((t=>{var n;p(((null===(n=null==e?void 0:e.getBoundingClientRect())||void 0===n?void 0:n.y)||0)<0&&t[0].intersectionRatio<.4),c()}),u)).observe(e)}return()=>{f&&f.disconnect()}}),[_]),r.createElement("div",{ref:_,className:l("wrapper")},r.createElement("div",{className:l(t,"content",{"is-stuck":m&&o,"is-minimized":h})},!m&&r.createElement("div",{className:l("controls")},a.top),d,r.createElement("div",{className:l("control-bar",{hide:n})},a.bottom,r.createElement("div",{className:l("controls")},m&&o&&a.top,i,m&&o&&r.createElement("button",{"data-icon":h?"":"",title:"Minimize",onClick:()=>v(!h),className:l("control-icon","icon","icon-common")})))))}))},86503:(e,t,n)=>{n.r(t),n.d(t,{SummaryStructure:()=>X,default:()=>ee,getURLForMatches:()=>Q}),n(752),n(76265),n(268),n(86544);var r=n(67294),a=n(19119),i=n(8575),s=n(34287),c=n(10838),o=n(81667),l=n(29643),u=n(12898),d=n(27262),m=n(32011),p=(n(73964),n(32320),n(64043),n(22462),n(45007)),h=n(76371),v=n(29522),_=(0,h.Z)(v.Z),f="NO_SELECTION";const y=e=>{var{entryMap:t,selectedEntry:n,updateStructure:a}=e,i=[];for(var[s,c]of(i.push(r.createElement("option",{key:"{NO_SELECTION}",value:f},"Highlight Entry in the 3D structure")),Object.entries(t))){var o=[];for(var l of Object.keys(c)){var u=s+"$-"+l;o.push(r.createElement("option",{key:u,value:l},l))}i.push(r.createElement("optgroup",{key:s,label:s},o))}var d=e=>{var t=e.target,n=t.value,r=null;if(null!==n){var i=t.options[t.selectedIndex].parentNode;r=null==i?void 0:i.label}a(r,n)};return r.createElement("select",{className:_("structure-viewer-select"),onChange:d,onBlur:d,value:n,"data-testid":"structure-entry-select"},i)};var b=n(16772),E=n(85869),g=(n(60429),n(65137),n(62795),n(13383),n(2191)),w=(0,n(21105).Z)({loader:()=>Promise.all([n.e(8457),n.e(824),n.e(5562),n.e(8678),n.e(1950)]).then(n.bind(n,52552)),loading:null});const S=e=>{var{protein:t,tracks:n,chain:a,id:i}=e,s=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(s.current&&s.current.addEventListener){var e=e=>{var n,{detail:{eventType:r,highlight:i,feature:c}}=e;"mouseover"===r&&c.aa&&(null===(n=s.current)||void 0===n||n.dispatchEvent(new CustomEvent("change",{detail:{highlight:i,eventType:"sequence-chain",chain:a,protein:t.accession},bubbles:!0,cancelable:!0})))};return s.current.addEventListener("change",e),()=>{s.current&&s.current.removeEventListener("change",e)}}}));var c=[...n];return r.createElement("div",{ref:s},r.createElement(w,{mainTracks:["secondary structure","families","domains","conserved site","active site"],hideCategories:{"secondary structure":!1,families:!1,domains:!1,"conserved site":!1,"active site":!1},protein:t,data:c,id:i,title:"Domains in the chain"}))};var k=n(82806),P=n(39272),N=n(57591),Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},I=(0,h.Z)(k.Z);function O(e){var t,n,r,a,i=void 0,s=void 0;return Array.isArray(e)?(i=null===(n=null===(t=e[0].locations)||void 0===t?void 0:t[0].fragments)||void 0===n?void 0:n[0],s=e[0].accession):(i=null===(a=null===(r=e.locations)||void 0===r?void 0:r[0].fragments)||void 0===a?void 0:a[0],s=e.accession),i&&s?[s,i.start,i.end]:[0,0]}function x(e,t){var[n,r,a]=O(e),[i,s,c]=O(t);if(r>s)return 1;if(r<s)return-1;if(r===s){if(a<c)return 1;if(a>c)return-1;if(a===c)return n>i?1:-1}return 0}var F=e=>{var t={};return(null==e?void 0:e.length)&&e.forEach((e=>{e.chain&&(t[e.chain]||(t[e.chain]=[]),t[e.chain].push(e))})),t};const R=e=>{var{entries:t,unintegrated:n,secondaryStructures:a,structure:i,representativeDomains:s,representativeFamilies:c}=e,o=(0,r.useMemo)((()=>{var e=((e,t)=>{var n,r,a={};for(var i of e){if(i.chain in a||(a[i.chain]={}),!(i.protein in a[i.chain])){var s=[];if(t){var c=function(){if(i.chain===o.accession){var e=[];o.locations.forEach((t=>{t.fragments.forEach((t=>{"helix"===t.shape?(t.fill="transparent",e.push(Object.assign({},t))):e.push(Object.assign({},t))}))}));var t=[];for(var n of e)t.push({fragments:[Object.assign({},n)]});s.push({locations:t,type:"secondary_structure",accession:"Chain "+o.accession,source_database:"PDB",chain:o.accession})}};for(var o of t)c()}a[i.chain][i.protein]={protein:{accession:i.protein,length:i.protein_length},sequence:{sequence:i.sequence,length:i.sequence_length},data:{secondary_structure:s},chain:i.chain}}var l=i.type;a[i.chain][i.protein].data[l]||(a[i.chain][i.protein].data[l]=[]),a[i.chain][i.protein].data[l].push({accession:i.accession,name:i.name,short_name:i.short_name,source_database:i.source_database,coordinates:(r=i.entry_structure_locations,r.map((e=>e.fragments.map((e=>[e.start,e.end]))))),locations:i.entry_structure_locations,link:"/entry/"+i.source_database+"/"+i.accession,children:null===(n=i.children)||void 0===n?void 0:n.map((e=>{var{entry_protein_locations:t,entry_structure_locations:n}=e,r=Z(e,["entry_protein_locations","entry_structure_locations"]);return Object.assign(Object.assign({},r),{locations:n})})),chain:i.chain,protein:i.protein,type:i.type||i.entry_type||""})}var u=[],d=Object.keys(a).sort(((e,t)=>e?e.localeCompare(t):-1));for(var m of d){var p=Object.keys(a[m]).sort(((e,t)=>e?e.localeCompare(t):-1));for(var h of p)Object.values(a[m][h].data).forEach((e=>e.sort(P.RF))),u.push(a[m][h])}return u})(t.concat(n),a);return(e=>{var t={};for(var n of e)n.chain in t||(t[n.chain]=[]),t[n.chain].push(n.protein.accession);for(var r of e)t[r.chain].length>1&&(r.isChimeric=!0)})(e),e}),[t,n,a]),u=(0,r.useMemo)((()=>F(s)),[s]),d=(0,r.useMemo)((()=>F(c)),[c]);return r.createElement(r.Fragment,null,r.createElement("div",{className:I("vf-stack","vf-stack--400")},o.map(((e,t)=>{var n,a=Object.assign({accession:e.chain+"-"+i},e.sequence),s=(0,N.az)(e.data),c=s.filter((e=>"homologous superfamily"==e[0]))[0];return s.map((t=>{"domain"===t[0]&&(t[0]="domains",u[e.chain]&&(t[1]=t[1].concat(u[e.chain])),c&&(t[1]=t[1].concat(c[1]))),"family"===t[0]&&(t[0]="families",d[e.chain]&&(t[1]=t[1].concat(d[e.chain]))),"homologous superfamily"!==t[0]&&"unintegrated"!==t[0]||(t[1]=[])})),s.map((e=>{e[1].sort(x).flat()})),r.createElement("div",{key:t,className:I("vf-stack")},r.createElement("h4",{id:"protvista-"+e.chain+"-"+e.protein.accession},"Chain ",e.chain," ",(null===(n=e.protein)||void 0===n?void 0:n.accession)&&r.createElement("small",null,"(",r.createElement(l.Z,{to:{description:{main:{key:"protein"},protein:{db:"uniprot",accession:e.protein.accession}}}},r.createElement("span",{className:I("icon","icon-conceptual"),"data-icon":"P"})," ",(e.protein.accession||"").toUpperCase()),")"),e.isChimeric&&r.createElement(g.Z,{title:"This chain maps to a Chimeric protein consisting of two or more proteins"},r.createElement("div",{className:I("tag")},r.createElement("span",{className:I("small","icon","icon-common"),"data-icon":"","aria-label":"This chain maps to a Chimeric protein consisting of two or more proteins"})," ","Chimeric"))),r.createElement(S,{tracks:s,chain:e.chain,id:e.chain+"-"+e.protein.accession,protein:a}))}))))};var C=n(14760),D=(0,a.P1)((e=>e.settings.api),(e=>e.customLocation.description.structure),((e,t)=>{var{protocol:n,hostname:r,port:a,root:s}=e,{accession:o}=t;return(0,i.format)({protocol:n,hostname:r,port:a,pathname:""+s+(0,c.Z)({main:{key:"entry"},structure:{isFilter:!0,db:"pdb",accession:o},entry:{db:"all"}}),query:{page_size:200,extra_fields:"short_name"}})})),M=(0,a.P1)((e=>e.settings.api),(e=>e.customLocation.description.structure),((e,t)=>{var{protocol:n,hostname:r,port:a,root:s}=e,{db:o,accession:l}=t,u={main:{key:"structure"},structure:{db:o,accession:l}};return(0,i.format)({protocol:n,hostname:r,port:a,pathname:s+(0,c.Z)(u),query:{extra_fields:"secondary_structures"}})}));const V=(0,s.Z)({propNamespace:"Secondary",getUrl:M})((0,s.Z)(D)((e=>{var t,n,{structure:a,data:i,dataSecondary:s}=e,c=(0,C.o)(null===(t=null==i?void 0:i.payload)||void 0===t?void 0:t.results,"structure");if(!i||i.loading)return r.createElement(E.Z,null);if(s&&!s.loading&&s.payload&&s.payload.extra_fields&&s.payload.extra_fields.secondary_structures&&(n=s.payload.extra_fields.secondary_structures),!i.payload||!c)return null;var{interpro:o,unintegrated:l,representativeDomains:u,representativeFamilies:d}=c;return r.createElement("div",null,r.createElement(R,{structure:a,entries:o,unintegrated:l,secondaryStructures:n,representativeFamilies:d,representativeDomains:u}))})));var q=n(55814),j=n(59500),A=n(6226),L=n(13105),B=n(20933),T=(0,h.Z)(v.Z,B.Z,k.Z);class H extends r.PureComponent{constructor(e){super(e),this.showEntryInStructure=(e,t,n)=>{var r,a,i,s=this.state.selectedEntryToKeep;if(t===f&&s?(s.db=null,s.accession=null,s.chain=null):void 0!==e&&void 0!==t?(r=e,a=t,i=n):s&&null!==s.db&&null!==s.accession&&null!==s.chain&&null!==s.protein&&(r=s.db,a=s.accession,i=s.chain),!a||!a.startsWith("Chain")){var c=this._collateHits(r||"",a||"",i);if(c.length>0){var o=[];c.forEach((e=>{var t,n=parseInt((null===(t=e.color)||void 0===t?void 0:t.substring(1))||"",16);o.push({color:n,start:e.start_residue_number,end:e.end_residue_number,chain:e.struct_asym_id})})),this.setState({selectionsInStructure:o})}else this.setState({selectionsInStructure:null});this.setState({selectedEntry:a||""})}},this.state={entryMap:{},selectedEntry:"",selectedEntryToKeep:null,isSplitScreen:!1,isSpinning:!1,shouldResetViewer:!1,selectionsInStructure:null,isReady:!1},this.name=""+this.props.id,this._protvista=r.createRef(),this._splitView=r.createRef(),this._structureView=r.createRef(),this.splitViewStyle={}}componentDidMount(){var e,t,n,r,a;return t=this,n=void 0,a=function*(){var t=this.props.id;null===(e=this._protvista.current)||void 0===e||e.addEventListener("change",(e=>{var{detail:{eventType:n,highlight:r,feature:a,chain:i}}=e,{accession:s,source_database:c,type:o,chain:l,protein:u,parent:d}=a||{},m=u;switch(n){case"sequence-chain":if(r){var[p,h]=r.split(":");this.setState({selectionsInStructure:[{color:16711680,start:Math.round(p),end:Math.round(h),chain:i}]}),this.handlingSequenceHighlight=!0}else this.setState({selectionsInStructure:null});break;case"click":!m&&d&&(m=d.protein),this.setState({selectedEntryToKeep:"chain"===o?{accession:t,db:"pdb",chain:s,protein:m}:{accession:s,db:c,chain:l,protein:m}});break;case"mouseover":if(this.handlingSequenceHighlight)return void(this.handlingSequenceHighlight=!1);"chain"===o?this.showEntryInStructure("pdb",t,s):"secondary_structure"===o?this.setSelectionsForSecondaryStructure(a):s&&!s.startsWith("G3D:")&&this.showEntryInStructure(c,s,l);break;case"mouseout":"secondary_structure"!==o&&this.showEntryInStructure()}}))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{o(a.next(e))}catch(e){i(e)}}function c(e){try{o(a.throw(e))}catch(e){i(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,c)}o((a=a.apply(t,n||[])).next())}))}componentDidUpdate(){this.state.shouldResetViewer&&requestAnimationFrame((()=>this.setState({shouldResetViewer:!1})))}setSelectionsForSecondaryStructure(e){var t=[];if(e.locations)for(var n of e.locations)for(var r of n.fragments)t.push({color:e.color,start:r.start,end:r.end});if(t.length>0){var a=[];t.forEach((t=>{var n=parseInt(t.color.substring(1),16);a.push({color:n,start:t.start,end:t.end,chain:e.chain||""})})),this.setState({selectionsInStructure:a})}else this.setState({selectionsInStructure:null})}_getChainMap(e,t){var n=[];for(var r of t)for(var{start:a,end:i}of r.fragments)n.push({struct_asym_id:e,start_residue_number:a,end_residue_number:i,accession:e,source_database:"pdb"});return n}_mapLocations(e,t){var{chain:n,locations:r,entry:a,db:i,match:s}=t;for(var c of r)for(var o of c.fragments)e[n].push({struct_asym_id:n,start_residue_number:Math.round(o.start),end_residue_number:Math.round(o.end),accession:a,source_database:i,parent:s.metadata.integrated?{accession:s.metadata.integrated}:null})}_collateHits(e,t,n){var r=[];return e&&t&&(n?r=r.concat(...this.state.entryMap[e][t][n]):Object.keys(this.state.entryMap[e][t]).forEach((n=>{r=r.concat(this.state.entryMap[e][t][n])}))),r.forEach((e=>e.color=(0,b.mt)(e,this.props.colorDomainsBy))),r}createEntryMap(){var e={pdb:{}};if(this.props.matches)for(var t of this.props.matches){var n=t.metadata.accession,r=t.metadata.source_database;for(var a of(e[r]||(e[r]={}),e[r][n]||(e[r][n]={}),t.structures)){var i=a.chain;e[r][n][i]||(e[r][n][i]=[]),this._mapLocations(e[r][n],{chain:i,locations:a.entry_structure_locations,entry:n,db:r,match:t}),e.pdb[a.accession]||(e.pdb[a.accession]={}),e.pdb[a.accession][i]||(e.pdb[a.accession][i]=this._getChainMap(i,a.entry_structure_locations))}}return e}render(){var{entryMap:e,selectedEntry:t,isSpinning:n,isSplitScreen:a,shouldResetViewer:i}=this.state,s=this.props.id,c="structure-"+s;return r.createElement("div",{ref:this._splitView,className:T({"split-view":a})},r.createElement(j.Z,{className:T("structure-viewer"),OtherControls:{top:this.props.matches?r.createElement(y,{entryMap:e,updateStructure:this.showEntryInStructure,selectedEntry:t}):null},OtherButtons:r.createElement("div",{style:{display:a?"none":"block"},className:T("button-bar")},r.createElement(l.Z,{className:T("control"),href:"https://www.ebi.ac.uk/pdbe/entry-files/download/pdb"+s+".ent",download:(s||"download")+".model.pdb.ent"},r.createElement("span",{className:T("icon","icon-common","icon-download"),"data-icon":""})," PDB file"),r.createElement(l.Z,{className:T("control"),href:"https://www.ebi.ac.uk/pdbe/entry-files/download/"+s+".cif",download:(s||"download")+".model.cif"},r.createElement("span",{className:T("icon","icon-common","icon-download"),"data-icon":""})," mmCIF file"),r.createElement("button",{className:T("icon","icon-common","as-link"),onClick:()=>{this.setState({isSpinning:!n})},"data-icon":n?"":"v",title:n?"Stop spinning":"Spin structure"}),r.createElement("button",{className:T("icon","icon-common","as-link"),onClick:()=>this.setState({shouldResetViewer:!0}),"data-icon":"}",title:"Reset image"}),r.createElement(q.Z,{element:this._splitView.current,className:T("icon","icon-common","as-link"),tooltip:"Split full screen",dataIcon:"icon-columns",onFullScreenHook:()=>this.setState({isSplitScreen:!0}),onExitFullScreenHook:()=>this.setState({isSplitScreen:!1})}),r.createElement(q.Z,{className:T("icon","icon-common","as-link"),tooltip:"View the structure in full screen mode",element:this.state.isReady?c:null}),r.createElement(A.Z,{className:T("icon","icon-common","as-link")}))},r.createElement(L.Z,{id:s,elementId:c,onStructureLoaded:()=>{if(this.props.matches){var e=this.createEntryMap();this.setState({entryMap:e,isReady:!0})}},isSpinning:n,shouldResetViewer:i,selections:this.state.selectionsInStructure,onReset:()=>{this.setState({selectionsInStructure:null})}})),r.createElement("div",{ref:this._protvista,"data-testid":"structure-protvista",className:T("protvista-container")},r.createElement(V,{structure:s})))}}var z=(0,a.P1)((e=>e.settings.ui),(e=>({colorDomainsBy:e.colorDomainsBy||b.tK.DOMAIN_RELATIONSHIP})));const U=(0,p.$j)(z)(H);var W=n(7464),$=n(36957),J=n(5931),K=n(44166),Y=(0,h.Z)(J.Z,K.Z),G=[{pattern:"https://www.ebi.ac.uk/pdbe/entry/pdb/{id}",label:"PDBe"},{pattern:"https://www.rcsb.org/structure/{id}",label:"RCSB PDB"},{pattern:"http://www.ebi.ac.uk/thornton-srv/databases/cgi-bin/pdbsum/GetPage.pl?pdbcode={id}",label:"PDBsum"},{pattern:"https://www.cathdb.info/pdb/{id}",label:"CATH"},{pattern:"http://scop.mrc-lmb.cam.ac.uk/search?t=txt;q={id}",label:"SCOP"},{pattern:"http://prodata.swmed.edu/ecod/complete/search?kw={id}",label:"ECOD"},{pattern:"https://proteopedia.org/wiki/index.php/{id}",label:"Proteopedia"},{pattern:"https://search.foldseek.com/search?accession={id}&source=PDB",label:"Foldseek"}],X=e=>{var{data:t,dataMatches:n}=e,{loading:a,payload:i}=t||{},{loading:s,payload:c}=n||{};if(a||s||!i)return null;var p=i.metadata,h=(null==c?void 0:c.results)||[],v=Array.from(new Set(p.chains||[])),_=new Date(p.release_date),f=Object.entries(p.literature||{}).map((e=>{var t,n,r;if(2===e.length&&null!==(null===(t=e[1])||void 0===t?void 0:t.DOI_URL)&&!(null===(r=null===(n=e[1])||void 0===n?void 0:n.DOI_URL)||void 0===r?void 0:r.startsWith("http"))){var a=e[1].DOI_URL;e[1].DOI_URL="https://www.doi.org/"+a}return e}));return r.createElement("div",{className:Y("vf-stack","vf-stack--400")},r.createElement("section",{className:Y("vf-grid","summary-grid")},r.createElement("div",{className:Y("vf-stack")},v.length&&r.createElement("table",{className:Y("vf-table","left-headers")},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{maxWidth:"50%"}},"Accession"),r.createElement("td",null,r.createElement(o.Z,{accession:p.accession}))),r.createElement("tr",null,r.createElement("td",null,"Experiment type"),r.createElement("td",{className:Y("text-cap")},r.createElement(l.Z,{to:{description:{main:{key:"structure"},structure:{db:"PDB"},entry:{isFilter:!0,db:"InterPro"}},search:{experiment_type:p.experiment_type}}},(0,W.Q)(p.experiment_type)))),p.resolution&&r.createElement("tr",null,r.createElement("td",null,"Resolution"),r.createElement("td",null,p.resolution," Å")),r.createElement("tr",null,r.createElement("td",null,"Chains"),r.createElement("td",null,v.join(", "))),r.createElement("tr",null,r.createElement("td",null,"Released"),r.createElement("td",null,(0,$.wX)(_)))))),r.createElement("div",{className:Y("vf-stack")},r.createElement("section",null,r.createElement("h5",null,"External Links"),r.createElement("ul",{className:Y("no-bullet")},G.map((e=>{var{label:t,pattern:n}=e;return r.createElement("li",{key:t},r.createElement(u.Z,{id:p.accession,target:"_blank",pattern:n,className:Y("ext")},t))})))))),r.createElement(d.Z,null,r.createElement("div",null,r.createElement(U,{id:p.accession,matches:h}))),r.createElement("div",null,f.length?r.createElement("section",{id:"references"},r.createElement("div",{className:Y("vf-grid")},r.createElement("h4",null,"References")),r.createElement(m.ZP,{extra:f})):null))},Q=(0,a.P1)((e=>e.settings.api),(e=>e.customLocation.description.structure),((e,t)=>{var{protocol:n,hostname:r,port:a,root:s}=e,{accession:o}=t;return(0,i.format)({protocol:n,hostname:r,port:a,pathname:""+s+(0,c.Z)({main:{key:"entry"},structure:{isFilter:!0,db:"pdb",accession:o},entry:{db:"all"}}),query:{page_size:200,extra_fields:"short_name"}})}));const ee=(0,s.Z)({getUrl:Q,propNamespace:"Matches"})((0,s.Z)()(X))},13105:(e,t,n)=>{n.d(t,{Z:()=>m}),n(73964),n(752),n(76265),n(60429);var r=n(67294),a=n(45007),i=n(19119),s=n(29643),c=n(55402),o=n(21105),l=n(87616);var u=(0,o.Z)({loader:()=>Promise.all([n.e(5270),n.e(8759)]).then(n.bind(n,8074)),loading:null}),d=(0,i.P1)((e=>e.settings.ui.structureViewer),(e=>({userActivatedVisible:e||!1})));const m=(0,a.$j)(d,{changeSettingsRaw:l.Ft},null,{forwardRef:!0})((e=>{var{id:t,userActivatedVisible:n,changeSettingsRaw:a}=e,[i,o]=(0,r.useState)(n),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{var e,t,n,r;(e=void 0,t=void 0,n=void 0,r=function*(){var e,t,n,r;o(!(yield(e=void 0,t=void 0,n=void 0,r=function*(){var e;if(!window.navigator)return!1;if("connection"in navigator&&"4g"!==(null===(e=navigator.connection)||void 0===e?void 0:e.effectiveType))return!0;if(window.innerWidth<650)return!0;try{if("getBattery"in navigator&&"function"==typeof navigator.getBattery){var t=yield navigator.getBattery();return!t.isCharging&&t.level<.15}}catch(e){}return!1},new(n||(n=Promise))((function(a,i){function s(e){try{o(r.next(e))}catch(e){i(e)}}function c(e){try{o(r.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}o((r=r.apply(e,t||[])).next())})))))},new(n||(n=Promise))((function(a,i){function s(e){try{o(r.next(e))}catch(e){i(e)}}function c(e){try{o(r.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}o((r=r.apply(e,t||[])).next())}))).catch(console.error)}),[]),i?r.createElement(u,Object.assign({},e)):r.createElement("div",{className:"ViewerOnDemand_style__wrapper___ae"},r.createElement("button",{className:"ViewerOnDemand_style__inner-wrapper___c3",onClick:()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.checked)&&a("ui","structureViewer",!0),o(!0)}},r.createElement("div",{className:"ViewerOnDemand_style__background___e3"},r.createElement(c.Z,{src:"//www.ebi.ac.uk/thornton-srv/databases/cgi-bin/pdbsum/getimg.pl?source=pdbsum&pdb_code="+t+"&file=traces.jpg",alt:"structure with accession "+t})),r.createElement("div",{className:"ViewerOnDemand_style__text___af"},r.createElement("p",null,"click or tap this area to display the interactive structure viewer"),r.createElement("p",null,r.createElement("label",{htmlFor:"cb_reminder"},"Remember this next time?"," ",r.createElement("input",{type:"checkbox",ref:l,id:"cb_reminder",onClick:e=>e.stopPropagation()})),r.createElement("small",null,"This can be reversed in the"," ",r.createElement(s.Z,{to:{description:{other:["settings"]}}},"Settings")," ","page")))))}))},36957:(e,t,n)=>{n.d(t,{cz:()=>a,iS:()=>s,ji:()=>c,wX:()=>i});var r=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e=>{var t=new Date(e);return(e=>{if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}})(t.getDate())+" "+r[t.getMonth()]+" "+t.getFullYear()},i=e=>e.getDate()+" "+r[e.getMonth()]+" "+e.getFullYear(),s=e=>(e.getDate()<10?"0":"")+e.getDate()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+e.getFullYear(),c=e=>(e.getDate()<10?"0":"")+e.getDate()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+e.getFullYear()+" "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()},20933:(e,t,n)=>{n.d(t,{Z:()=>r});const r={"button-bar":"ViewerAndEntries_button-bar__button-bar___bb",control:"ViewerAndEntries_button-bar__control___e3"}},29522:(e,t,n)=>{n.d(t,{Z:()=>r});const r={"structure-viewer":"ViewerAndEntries_style__structure-viewer___f0","structure-viewer-select":"ViewerAndEntries_style__structure-viewer-select___ca","as-link":"ViewerAndEntries_style__as-link___ff","split-view":"ViewerAndEntries_style__split-view___c0","protvista-container":"ViewerAndEntries_style__protvista-container___c4",wrapper:"ViewerAndEntries_style__wrapper___e8"}}}]);
//# sourceMappingURL=8810.module.structure-summary.cb4.js.map