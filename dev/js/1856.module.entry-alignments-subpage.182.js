"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[1856],{30348:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(67294),a=n(45697),r=n.n(a),l=n(87616),s=n(45007),i=e=>{var{title:t,body:n,checkBoxLabel:a,ttl:r,toastID:l,addToast:s,changeSettingsRaw:i,settingsName:c}=e;return(0,o.useEffect)((()=>{s({title:t||"üí° Tip",body:n,checkBox:{label:a||"Do not show again",fn:()=>i("notifications",c,!1)},ttl:r||5e3},l)})),null};i.propTypes={title:r().string,body:r().oneOfType([r().string,r().object]).isRequired,checkBoxLabel:r().string,ttl:r().number,toastID:r().string.isRequired,settingsName:r().string.isRequired,addToast:r().func.isRequired,changeSettingsRaw:r().func.isRequired};const c=(0,s.$j)(null,{addToast:l.fz,changeSettingsRaw:l.Ft})(i)},64881:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A}),n(752),n(76265),n(65137),n(268),n(60429),n(97389),n(64043),n(61514),n(86544);var o=n(67294),a=n(80284),r=n(45697),l=n.n(r),s=n(45007),i=n(19119),c=n(87616),u=n(8575),m=n(10838),d=n(29643),p=n(30348),g=(n(73964),n(57267),n(79800)),y=n.n(g),v=n(9495),h=n(2191),f=n(3817),b=(n(56387),n(54552),n(42647),n(76349),n(3509)),E=n(82806),C=n(85869);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w.apply(this,arguments)}function T(e,t,n,o,a,r,l){try{var s=e[r](l),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(o,a)}var k=(0,b.D)(E.Z,{"zoom-button":"Viewer_style__zoom-button___cd"}),_=5,L=.9,Z=e=>{var{data:{loading:t,payload:n},colorscheme:a,onConservationProgress:r,setColorMap:l,overlayConservation:s,contacts:i=null,contactMinDistance:c=_,contactMinProbability:u=L,onAlignmentLoaded:m=(()=>null),goToCustomLocation:d}=e,p=(0,o.useRef)(null),g=(0,o.useRef)(null),v=(0,o.useRef)(null),[b,E]=(0,o.useState)(null),[Z,x]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{!function(){var e,t=(e=function*(){var e=["nightingale-manager","nightingale-navigation","nightingale-msa","nightingale-links"].map((e=>customElements.whenDefined(e)));yield Promise.all(e),x(!0)},function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){T(r,o,a,l,s,"next",e)}function s(e){T(r,o,a,l,s,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}()()}),[]),(0,o.useEffect)((()=>{if(n&&Z){var e=y().parse(n);E(e),m(e)}}),[n]),(0,o.useEffect)((()=>{if(b){var e=b.seqname.map((e=>({name:e,sequence:b.seqdata[e]})));requestAnimationFrame((()=>p.current.data=e)),p.current.addEventListener("conservationProgress",(e=>{r(e.detail.progress)})),p.current.addEventListener("drawCompleted",(()=>{var{map:e}=p.current.getColorMap();l(e||{})})),p.current.addEventListener("msa-active-label",(e=>{var t,n=e.detail.label,o=null==(t=b.gs.AC[n])||null==(t=t[0])?void 0:t.replace(/\.\d$/,"");o&&d({description:{main:{key:"protein"},protein:{db:"uniprot",accession:o}}})})),i&&g.current&&(g.current.contacts=i.map((e=>[e[2],e[3],e[4]])))}}),[b,i]),t||!n||!b)return o.createElement(C.Z,null);var q=b.columns(),S={"calculate-conservation":!0,"sample-size-conservation":100};return s&&(S["overlay-conservation"]=!0),o.createElement(o.Fragment,null,o.createElement("nightingale-manager",{id:"example"},o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{width:200,flexShrink:0,fontWeight:"bold",textAlign:"center",alignSelf:"center",display:"flex",flexDirection:"column",height:"80px",justifyContent:"center",gap:"1rem"}},o.createElement("span",null,b.rows().toLocaleString()," sequences"),o.createElement("div",null,o.createElement(f.Z,{type:"inline",icon:"icon-minus-square",className:k("zoom-button"),title:"Click or use CTRL + mouse wheel down to zoom out",onClick:()=>{var e;null==(e=v.current)||e.zoomOut()}}),o.createElement(f.Z,{type:"inline",icon:"icon-plus-square",className:k("zoom-button"),title:"Click or use CTRL + mouse wheel up to to zoom in",onClick:()=>{var e;null==(e=v.current)||e.zoomIn()}}))),o.createElement("nightingale-navigation",{ref:v,length:q,"display-end":Math.min(200,q),height:80})),i&&o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{width:200,flexShrink:0,fontWeight:"bold"}},"Contacts"," ",o.createElement(h.Z,{title:'\n                  <p>\n                    The color of the nodes indicates if there are less <span style="color:orange; background:white;">‚óè</span>\n                    or more <span style="color:blue; background:white;">‚óè</span> predicted contacts.\n                  </p>'},o.createElement("sup",null,o.createElement("span",{className:k("small","icon","icon-common"),"data-icon":"ÔÑ©","aria-label":"description for contact track"})))),o.createElement("nightingale-links",{id:"contacts-track",length:q,ref:g,height:60,"min-probability":u,"min-distance":c,"use-ctrl-to-zoom":!0})),o.createElement("nightingale-msa",w({length:q,height:"600","display-end":Math.min(200,q),"use-ctrl-to-zoom":!0,"label-width":200,ref:p,"color-scheme":a},S))))};Z.propTypes={type:l().string.isRequired,colorscheme:l().string,onConservationProgress:l().func,setColorMap:l().func,contacts:l().array,contactMinDistance:l().number,contactMinProbability:l().number,data:a.XE,onAlignmentLoaded:l().func,goToCustomLocation:l().func,overlayConservation:l().bool};var x=(0,i.P1)((e=>e.settings.api),(e=>e.customLocation.description),((e,t)=>t.type),((e,t,n)=>{var{protocol:o,hostname:a,port:r,root:l}=e,s=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));return t.main.key&&(s[t.main.key]=Object.assign({},t[t.main.key],{detail:null})),(0,u.format)({protocol:o,hostname:a,port:r,pathname:l+(0,m.Z)(s),query:{annotation:n}})}));const q=(0,v.Z)({getUrl:x,fetchOptions:{responseType:"gzip"},mapDispatchToProps:{goToCustomLocation:c.xb}})(Z);var S=n(26940),P=n(16786),j=(0,b.D)({"alignment-selector":"EntryAlignments_style__alignment-selector___d4",controllers:"EntryAlignments_style__controllers___a1",disabled:"EntryAlignments_style__disabled___f1"},P.Z,E.Z),z=e=>{var{type:t,numSequences:n,colorscheme:a,onConservationProgress:r,setDisplayingAlignment:l,setColorMap:s,overlayConservation:i}=e,[c,u]=(0,o.useState)(!1),m=c||n<1e3;return(0,o.useEffect)((()=>{l(m)}),[m]),(0,o.useEffect)((()=>{u(!1)}),[n]),o.createElement("div",null,m?o.createElement(q,{onConservationProgress:r,setColorMap:s,type:t,num:n,colorscheme:a,overlayConservation:i}):o.createElement("div",null,o.createElement("p",null,"This alignment has ",n," sequences. This can cause memory issues in your browser."),o.createElement("p",null,o.createElement(f.Z,{onClick:()=>u(!0)},"Open alignment"))))};z.propTypes={type:l().string,numSequences:l().number,colorscheme:l().string,onConservationProgress:l().func,setDisplayingAlignment:l().func,setColorMap:l().func,overlayConservation:l().bool};var D=["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo"],O=e=>{var t,n,a,{data:r,customLocation:l,type:s,url:i,showCtrlToZoomToast:c,goToCustomLocation:u}=e,m="alignment:",[g,y]=(0,o.useState)("clustal2"),[v,h]=(0,o.useState)(0),[f,b]=(0,o.useState)({}),[E,C]=(0,o.useState)(!1),[w,T]=(0,o.useState)(!1),k=Object.entries((null==r||null==(t=r.payload)||null==(t=t.metadata)?void 0:t.entry_annotations)||{}).filter((e=>{var[t]=e;return t.startsWith(m)})).map((e=>{var[t,n]=e;return[t.slice(10),n]})).sort(((e,t)=>{var[,n]=e,[,o]=t;return n-o}));if(!k.length)return null;var _=e=>{u(Object.assign({},l,{search:{type:e.target.value}}))},L=s||"",Z=1===v?{}:{disabled:!0};return o.createElement("div",{className:j("row","column")},""!==L&&c?o.createElement(p.Z,{body:"You can Zoom in/out by pressing [ctrl] and scroll up/down. Alternatively, you can  drag the borders in the navigation component.",toastID:"ctrlToZoom",settingsName:"showCtrlToZoomToast"}):null,o.createElement("label",{className:j("alignment-selector")},o.createElement("span",null,"Available alignments:"),o.createElement("select",{value:L,onChange:_,onBlur:_},o.createElement("option",{value:"",disabled:!0},"Choose..."),k.map((e=>{var[t,n]=e;return o.createElement("option",{key:t,value:t},t," (",n.toLocaleString(),")")})))),o.createElement("div",{className:j("controllers")},""!==L&&o.createElement(o.Fragment,null,E&&o.createElement(o.Fragment,null,o.createElement("label",null,"Colors:",o.createElement("select",{value:g,onChange:e=>y(e.target.value),onBlur:e=>y(e.target.value)},D.map((e=>o.createElement("option",{key:e},e))),o.createElement("option",Z,"conservation",v<1?"[Calculating: "+(100*v).toFixed(2)+"%]":""))),o.createElement("label",{className:j({disabled:v<1})},"Conservation:",o.createElement("input",{type:"checkbox",value:w,onChange:()=>T(!w),disabled:v<1})),o.createElement(S.Z,{label:"Legends",extraClasses:j("dropdown-container")},o.createElement("table",{className:j("legend-table")},o.createElement("tbody",null,Object.entries(f).map(((e,t)=>{var[n,a]=e;return o.createElement("tr",{key:t},o.createElement("td",{style:{background:a}}," "),o.createElement("td",null,n))})))))),o.createElement(d.Z,{buttonType:"secondary",href:""+i+m+L+"&download",download:((null==r||null==(n=r.payload)||null==(n=n.metadata)?void 0:n.accession)||"download")+".alignment."+L+".gz"},o.createElement("span",{className:j("icon","icon-common","icon-download"),"data-icon":"ÔÄô"})," ","Download"))),""!==L&&o.createElement(z,{colorscheme:g,type:""+m+L,numSequences:null==r||null==(a=r.payload)||null==(a=a.metadata)?void 0:a.entry_annotations[""+m+L],onConservationProgress:h,setDisplayingAlignment:C,setColorMap:b,overlayConservation:w}))};O.propTypes={data:a.XE,customLocation:l().object,type:l().string,url:l().string,showCtrlToZoomToast:l().bool,goToCustomLocation:l().func};var R=(0,i.P1)((e=>e.customLocation),(e=>{var t;return null==(t=e.customLocation)||null==(t=t.search)?void 0:t.type}),(e=>{var{protocol:t,hostname:n,port:o,root:a}=e.settings.api,r=e.customLocation.description,l=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r),r));return r.main.key&&(l[r.main.key]=Object.assign({},r[r.main.key],{detail:null})),(0,u.format)({protocol:t,hostname:n,port:o,pathname:a+(0,m.Z)(l),query:{annotation:""}})}),(e=>e.settings.notifications.showCtrlToZoomToast),((e,t,n,o)=>({customLocation:e,type:t,url:n,showCtrlToZoomToast:o})));const A=(0,s.$j)(R,{goToCustomLocation:c.xb})(O)}}]);
//# sourceMappingURL=1856.module.entry-alignments-subpage.182.js.map