{"version":3,"file":"js/2813.module.hmm-model-subpage.fe5.js","mappings":"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","sources":["webpack://interpro7-client/./src/components/Entry/HmmModels/index.js","webpack://interpro7-client/./src/subPages/HMMModel/index.js"],"sourcesContent":["// @flow\nimport React, { useEffect } from 'react';\nimport T from 'prop-types';\n\nimport { foundationPartial } from 'styles/foundation';\n\nimport { createSelector } from 'reselect';\nimport Loading from 'components/SimpleCommonComponents/Loading';\nimport Link from 'components/generic/Link';\nimport loadData from 'higherOrder/loadData';\nimport { format } from 'url';\n\n// $FlowFixMe\nimport descriptionToPath from 'utils/processDescription/descriptionToPath';\n\nimport config from 'config';\n\nimport Skylign from 'skylign/src/index';\n\nimport ebiGlobalStyles from 'ebi-framework/css/ebi-global.css';\nimport styles from './logo.css';\nimport loadable from 'higherOrder/loadable';\nimport loadWebComponent from 'utils/load-web-component';\n\nconst f = foundationPartial(ebiGlobalStyles, styles);\n\nconst SchemaOrgData = loadable({\n  loader: () => import(/* webpackChunkName: \"schemaOrg\" */ 'schema_org'),\n  loading: () => null,\n});\n\nconst schemaProcessData = (data) => {\n  return {\n    '@id': '@additionalProperty',\n    '@type': 'PropertyValue',\n    name: 'hasSignature',\n    value: [\n      {\n        '@type': 'CreativeWork',\n        additionalType: ['bio:DataRecord', 'AlignmentLogo'],\n        additionalProperty: [\n          {\n            '@type': 'PropertyValue',\n            name: 'maxHeight',\n            value: data.max_height,\n          },\n          {\n            '@type': 'PropertyValue',\n            name: 'processing',\n            value: data.processing,\n          },\n          {\n            '@type': 'PropertyValue',\n            name: 'alphabet',\n            value: data.alphabet,\n          },\n          {\n            '@type': 'PropertyValue',\n            name: 'minHeightObserved',\n            value: data.min_height_obs,\n          },\n        ],\n      },\n    ],\n  };\n};\n\nconst HmmModelSection = ({ logo, data }) => {\n  useEffect(() => {\n    loadWebComponent(() => Skylign).as('skylign-component');\n\n    // TODO: Change style in `skylign-component` itself.\n    // This is a temporaly walkaround to change a shadow DOM style from this code base.\n    customElements.whenDefined('skylign-component').then(() => {\n      const controlsDiv = document\n        .querySelector('skylign-component')\n        ?.shadowRoot?.querySelector('div');\n\n      if (controlsDiv) controlsDiv.style.position = 'relative';\n    });\n  });\n\n  const { loading, payload } = data;\n\n  if (loading) return <Loading />;\n  // eslint-disable-next-line camelcase\n  const details = payload?.extra_fields?.details;\n\n  return (\n    <div className={f('row')}>\n      <div className={f('columns')}>\n        <div className={f('logo_wrapper')}>\n          <SchemaOrgData\n            data={JSON.stringify(logo)}\n            processData={schemaProcessData}\n          />\n          <h4>Profile HMM Information</h4>\n          <table className={f('light', 'table-sum')}>\n            <tbody>\n              {details && (\n                <>\n                  <tr>\n                    <td>HMM build commands</td>\n                    <td>\n                      Build method: {details.hmm?.commands?.build || ''}\n                      <br />\n                      Search method: {details.hmm?.commands?.search || ''}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Gathering threshold</td>\n                    <td>\n                      Sequence:{' '}\n                      {details.hmm?.cutoffs?.gathering?.sequence || ''}\n                      <br />\n                      Domain: {details.hmm?.cutoffs?.gathering?.domain || ''}\n                    </td>\n                  </tr>\n                </>\n              )}\n              <tr>\n                <td>Download</td>\n                <td>\n                  <Link\n                    href={`${config.root.API.href}/entry/${payload?.metadata?.source_database}/${payload?.metadata?.accession}?annotation=hmm`}\n                    download={`${\n                      payload?.metadata?.accession || 'download'\n                    }.hmm.gz`}\n                  >\n                    <span\n                      className={f('icon', 'icon-common', 'icon-download')}\n                      data-icon=\"&#xf019;\"\n                    />{' '}\n                    Download\n                  </Link>{' '}\n                  the raw HMM for this family\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <br />\n          <h4>Profile HMM logo</h4>\n          <skylign-component logo={JSON.stringify(logo)} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nHmmModelSection.propTypes = {\n  logo: T.object.isRequired,\n};\n\nconst getPfamCurationUrl = createSelector(\n  (state) => state.settings.api,\n  (state) => state.customLocation.description.main.key,\n  (state) =>\n    state.customLocation.description.main.key &&\n    state.customLocation.description[state.customLocation.description.main.key]\n      .db,\n  (state) =>\n    state.customLocation.description[state.customLocation.description.main.key]\n      .accession,\n  ({ protocol, hostname, port, root }, mainType, db, accession) => {\n    if (!accession) return;\n    return format({\n      protocol,\n      hostname,\n      port,\n      pathname:\n        root +\n        descriptionToPath({\n          main: { key: mainType },\n          [mainType]: {\n            db,\n            accession,\n          },\n        }),\n      query: { extra_fields: 'details' },\n    });\n  },\n);\n\nexport default loadData(getPfamCurationUrl)(HmmModelSection);\n","// @flow\nimport React, { PureComponent } from 'react';\nimport T from 'prop-types';\n\nimport HmmModelSection from 'components/Entry/HmmModels';\nimport Loading from 'components/SimpleCommonComponents/Loading';\n\nclass HMMModelSubPage extends PureComponent /*:: <{ data: Object }> */ {\n  static propTypes = {\n    data: T.object.isRequired,\n  };\n\n  render() {\n    if (this.props.data.loading) return <Loading />;\n    return <HmmModelSection logo={this.props.data.payload} />;\n  }\n}\n\nexport default HMMModelSubPage;\n"],"names":["f","foundationPartial","ebiGlobalStyles","SchemaOrgData","loadable","loader","loading","schemaProcessData","data","name","value","additionalType","additionalProperty","max_height","processing","alphabet","min_height_obs","HmmModelSection","_ref","_payload$extra_fields","_details$hmm","_details$hmm2","_details$hmm3","_details$hmm4","_payload$metadata","_payload$metadata2","_payload$metadata3","logo","useEffect","loadWebComponent","Skylign","as","customElements","whenDefined","then","_document$querySelect","controlsDiv","document","querySelector","shadowRoot","style","position","payload","React","Loading","details","extra_fields","className","JSON","stringify","processData","hmm","commands","build","search","cutoffs","gathering","sequence","domain","Link","href","config","root","API","metadata","source_database","accession","download","propTypes","T","isRequired","getPfamCurationUrl","createSelector","state","settings","api","customLocation","description","main","key","db","_ref2","mainType","protocol","hostname","port","format","pathname","descriptionToPath","query","loadData","HMMModelSubPage","PureComponent","render","this","props"],"sourceRoot":""}