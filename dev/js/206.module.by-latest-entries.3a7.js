"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[206],{84565:(t,e,a)=>{a.r(e),a.d(e,{ByLatestEntries:()=>g,default:()=>y});var s=a(67294),r=a(19119),n=a(8575),o=a(34287),i=a(10838),l=a(85869),c=a(29643),d=a(9838),p=a(21501),h=a(76371),u=a(82806),v=a(5620),f=(0,h.Z)(u.Z,v.Z),g=t=>{var{data:e}=t;if(!e||!e.ok)return null;if(e.loading)return s.createElement(l.Z,null);if(e.payload){var a=e.payload.results.slice(0,7);return s.createElement("div",{className:f("feat-entry-list")},s.createElement("div",{className:f("vf-stack","vf-stack--200")},s.createElement(d.Z,{className:f("wrapper"),element:"div"},a.map((t=>s.createElement(p.Z,{entry:t,key:t.metadata.accession})))),s.createElement("div",null,s.createElement(c.Z,{to:{description:{main:{key:"entry"},entry:{db:"InterPro"}},search:{latest_entries:""}},buttonType:"primary"},"Browse all new entries"))))}},m=(0,r.P1)((t=>t.settings.api),(t=>{var{protocol:e,hostname:a,port:s,root:r}=t;return(0,n.format)({protocol:e,hostname:a,port:s,pathname:r+(0,i.Z)({main:{key:"entry"},entry:{db:"interpro"}}),query:{latest_entries:"",extra_fields:"counters"}})}));const y=(0,o.Z)(m)(g)},34287:(t,e,a)=>{a.d(e,{Z:()=>f}),a(73964),a(60429),a(752),a(51090),a(76265);var s=a(67294),r=a(45007),n=a(19119),o=a(74482),i=a(66467),l=a(87616),c=a(94028),d=a(72004),p=a(27262),h=function(t,e,a,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(t,a):r?r.value=a:e.set(t,a),a},u=function(t,e,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(t):s?s.value:e.get(t)},v=(0,n.P1)((t=>t),(t=>({appState:t})));const f=t=>{var{getUrl:e,fetchOptions:a,propNamespace:n,weight:f,mapStateToProps:g,mapDispatchToProps:m}=(0,c.Z)(t),y=(0,d.Z)(a),w=t=>({loading:!!t,progress:0,ok:!0,status:null,payload:null,url:t});return t=>{var c,d;class b extends s.PureComponent{constructor(t){super(t),c.set(this,void 0),d.set(this,void 0),this.timeoutID=0,this._cancel=()=>{var t,e;u(this,d,"f")&&u(this,d,"f").cancel(),null===(e=(t=this.props).dataProgressUnload)||void 0===e||e.call(t,u(this,c,"f"))},this._progress=t=>{var e,a;this.setState((e=>{var{data:a}=e;return{data:Object.assign(Object.assign({},a),{progress:t})}})),null===(a=(e=this.props).dataProgressInfo)||void 0===a||a.call(e,u(this,c,"f"),t,f)},this._load=t=>{return e=this,s=void 0,n=function*(){var e,s,r,n,o,l,p;if(t){null===(s=(e=this.props).dataProgressInfo)||void 0===s||s.call(e,u(this,c,"f"),0,f),h(this,d,(0,i.Z)((e=>y(t,Object.assign(Object.assign({},a),{signal:e}),this._progress,this.props.addToast))),"f");var v=u(this,d,"f");try{var g=yield v.promise;gtag("event","data",{event_category:"data",event_response:g.status,event_label:t,event_clientcache:g.headers.has("Client-Cache")?1:0,event_cache:g.headers.has("Cached")?1:0}),this.setState((t=>{var{data:e}=t,a=Object.assign(Object.assign(Object.assign({},e),g),{progress:1,loading:!1});return{data:a,staleData:a}})),null===(n=(r=this.props).dataProgressInfo)||void 0===n||n.call(r,u(this,c,"f"),1,f);var m=1e3*((null===(o=this.props.appState)||void 0===o?void 0:o.settings.navigation.secondsToRetry)||0);408===g.status&&(this.timeoutID=window.setTimeout((()=>{console.log("Retrying the Timed out query"),this.setState({retries:this.state.retries+1})}),m))}catch(e){v.canceled||(gtag("event","error",{event_category:"data",event_status:"fail",event_label:t,event_online:window.navigator.onLine?1:0}),this.setState((t=>{var{data:a}=t;return{data:Object.assign(Object.assign({},a),{loading:!1,progress:1,ok:!1,error:e})}})),null===(p=(l=this.props).dataProgressInfo)||void 0===p||p.call(l,u(this,c,"f"),1,f))}}else this.setState({staleData:Object.assign({},this.state.data)})},new((r=void 0)||(r=Promise))((function(t,a){function o(t){try{l(n.next(t))}catch(t){a(t)}}function i(t){try{l(n.throw(t))}catch(t){a(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(t){t(a)}))).then(o,i)}l((n=n.apply(e,s||[])).next())}));var e,s,r,n},h(this,c,(0,o.Z)("data-loader"),"f");var s=(null==e?void 0:e(t.appState||{},t))||"";this.state={url:s,data:w(s),staleData:void 0,retries:0}}static getDerivedStateFromProps(t,a){var s=(null==e?void 0:e(t.appState||{},t))||"";return a.url===s?null:{data:w(s),url:s}}componentDidMount(){this._load(this.state.url)}componentDidUpdate(t,e){e.url===this.state.url&&e.retries===this.state.retries||(this._cancel(),this._load(this.state.url))}componentWillUnmount(){this._cancel(),this.timeoutID&&window.clearTimeout(this.timeoutID)}render(){var e=this.props,{dataProgressInfo:a,dataProgressUnload:r,addToast:o,appState:i}=e,l=function(t,e){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(a[s[r]]=t[s[r]])}return a}(e,["dataProgressInfo","dataProgressUnload","addToast","appState"]),c="isStale"+n,d={["data"+n]:this.state.staleData||this.state.data,[c]:this.state.staleData!==this.state.data};return this.state.data&&!this.state.data.loading&&this.state.data.url===this.state.url&&(d["isStale"+n]=!1),s.createElement(p.m,{customLocation:null==i?void 0:i.customLocation},s.createElement(t,Object.assign({},l,d,(null==g?void 0:g(i,Object.assign(Object.assign({},l),d)))||{})))}}c=new WeakMap,d=new WeakMap,b.displayName="loadData("+(t.displayName||t.name)+")";var P=Object.assign({dataProgressInfo:l.fF,dataProgressUnload:l.ks,addToast:l.fz},m);return(0,r.$j)(v,P)(b)}}}}]);
//# sourceMappingURL=206.module.by-latest-entries.3a7.js.map