{"version":3,"file":"js/2530.module.search-history.df4.js","mappings":"4RAiBMA,GAAIC,EAAAA,EAAAA,GAAkBC,EAAAA,EAAiBC,EAAAA,EAAOC,EAAAA,EChBpD,CAAgB,mBAAmB,8CAA8C,cAAc,yCAAyC,cAAc,yCAAyC,cAAc,2CDkBhMC,EAAgBA,KAC3B,IAAOC,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,IAkB/C,OALAC,EAAAA,EAAAA,YAAU,KACJC,EAAAA,GAAiBA,EAAAA,EAAcC,WACjCJ,EAAeG,EAAAA,EAAcC,YAC1BJ,EAAe,GAAG,GACtB,IAEDK,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,OAAKC,UAAWb,EAAE,QAChBY,EAAAA,cAAA,OAAKC,UAAWb,EAAE,qBACfM,EAAYQ,KAAKC,GAChBH,EAAAA,cAAA,OAAKC,UAAWb,EAAE,MAAO,eAAgBgB,IAAKD,GAC5CH,EAAAA,cAAA,UACEC,UAAWb,EAAE,eACbiB,QAASA,IApBHF,KAClB,IAAMG,EAAgBR,EAAAA,EAAcC,WACpCO,EAAcC,OAAOD,EAAcE,QAAQL,GAAO,GAClDL,EAAAA,EAAcW,SAASH,GACvBX,EAAeW,EAAc,EAgBFI,CAAWP,IAC3B,KAGDH,EAAAA,cAACW,EAAAA,EAAI,CACHC,GAAI,CACFC,YAAa,CACXC,KAAM,CAAEV,IAAK,UACbW,OAAQ,CACNC,KAAM,OACNC,MAAOd,KAIbF,UAAWb,EAAE,gBAEbY,EAAAA,cAAA,YAAOG,SAMhBT,EAAYwB,OAAS,EACpBlB,EAAAA,cAAA,OAAKC,UAAWb,EAAE,QAChBY,EAAAA,cAAA,OAAKC,UAAWb,EAAE,WAChBY,EAAAA,cAACmB,EAAAA,EAAM,CAACH,KAAK,WAAWX,QAlDbe,KACnBtB,EAAAA,EAAcW,SAAS,IACvBd,EAAe,GAAG,GAgDqC,mBAMnDK,EAAAA,cAACqB,EAAAA,EAAO,CAACL,KAAK,QACZhB,EAAAA,cAAA,QAAMsB,MAAO,CAAEC,WAAY,SAAU,uCAKxC,EAIP,S,uCEnFIC,E,WAEJ,IACEA,EAAU,IAAIC,EAAAA,EAAQ,SAAU,QAJX,IAKvB,CAAE,MAAOC,GAEPC,QAAQD,MAAM,8DACdC,QAAQD,MAAMA,EAChB,CAEA,S","sources":["webpack://interpro7-client/./src/components/home/SearchHistory/index.js","webpack://interpro7-client/./src/components/home/SearchHistory/styles.css?0a2b","webpack://interpro7-client/./src/storage/searchStorage.js"],"sourcesContent":["// @flow\nimport React, { useState, useEffect } from 'react';\n\nimport searchStorage from 'storage/searchStorage';\nimport Link from 'components/generic/Link';\n// $FlowFixMe\nimport Callout from 'components/SimpleCommonComponents/Callout';\n// $FlowFixMe\nimport Button from 'components/SimpleCommonComponents/Button';\n\nimport { foundationPartial } from 'styles/foundation';\n\nimport ipro from 'styles/interpro-new.css';\nimport theme from 'styles/theme-interpro.css';\nimport ebiGlobalStyles from 'ebi-framework/css/ebi-global.css';\nimport styles from './styles.css';\n\nconst f = foundationPartial(ebiGlobalStyles, theme, ipro, styles);\n\nexport const SearchHistory = () => {\n  const [searchTerms, setSearchTerms] = useState([]);\n  const clearHistory = () => {\n    searchStorage.setValue([]);\n    setSearchTerms([]);\n  };\n\n  const removeTerm = (term) => {\n    const currentValues = searchStorage.getValue();\n    currentValues.splice(currentValues.indexOf(term), 1);\n    searchStorage.setValue(currentValues);\n    setSearchTerms(currentValues);\n  };\n\n  useEffect(() => {\n    if (searchStorage && searchStorage.getValue())\n      setSearchTerms(searchStorage.getValue());\n    else setSearchTerms([]);\n  }, []);\n  return (\n    <>\n      <div className={f('row')}>\n        <div className={f('search-terms-div')}>\n          {searchTerms.map((term) => (\n            <div className={f('tag', 'search-term')} key={term}>\n              <button\n                className={f('remove-term')}\n                onClick={() => removeTerm(term)}\n              >\n                âœ–\n              </button>\n              <Link\n                to={{\n                  description: {\n                    main: { key: 'search' },\n                    search: {\n                      type: 'text',\n                      value: term,\n                    },\n                  },\n                }}\n                className={f('search-link')}\n              >\n                <span>{term}</span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n      {searchTerms.length > 0 ? (\n        <div className={f('row')}>\n          <div className={f('column')}>\n            <Button type=\"tertiary\" onClick={clearHistory}>\n              Clear History\n            </Button>\n          </div>\n        </div>\n      ) : (\n        <Callout type=\"info\">\n          <span style={{ fontWeight: 'bold' }}>\n            There has been no recent searches.\n          </span>\n        </Callout>\n      )}\n    </>\n  );\n};\n\nexport default SearchHistory;\n","// extracted by mini-css-extract-plugin\nexport default {\"search-terms-div\":\"SearchHistory_styles__search-terms-div___cb\",\"search-term\":\"SearchHistory_styles__search-term___d1\",\"remove-term\":\"SearchHistory_styles__remove-term___a9\",\"search-link\":\"SearchHistory_styles__search-link___c9\"};","// @flow\nimport Storage from 'utils/storage';\n\nconst THROTTLE_DELAY = 1000;\nlet storage;\n\ntry {\n  storage = new Storage('search', 'local', THROTTLE_DELAY);\n} catch (error) {\n  // Don't subscribe persistent storage for settings\n  console.error('Unable to create a persistent storage for the search terms');\n  console.error(error);\n}\n\nexport default storage;\n"],"names":["f","foundationPartial","ebiGlobalStyles","theme","ipro","SearchHistory","searchTerms","setSearchTerms","useState","useEffect","searchStorage","getValue","React","className","map","term","key","onClick","currentValues","splice","indexOf","setValue","removeTerm","Link","to","description","main","search","type","value","length","Button","clearHistory","Callout","style","fontWeight","storage","Storage","error","console"],"sourceRoot":""}