"use strict";(self.webpackChunkinterpro7_client=self.webpackChunkinterpro7_client||[]).push([[8662],{48189:(e,t,n)=>{n.d(t,{Z:()=>d}),n(752),n(76265),n(78730),n(79307);var s=n(67294),a=n(80866),r=n(76371),c=n(82806),i=n(5931),o=n(44166),l=n(35395),u=(0,r.Z)(i.Z,o.Z,c.Z,l.Z);const d=e=>{var{accession:t,sequence:n}=e;return s.createElement("a",{className:u("vf-button","vf-button--secondary","vf-button--sm"),style:{display:"block",minWidth:"200px",width:"100%"},download:t+".fa",href:URL.createObjectURL(new Blob([(0,a.P)(n,t,!1)],{type:"text/plain"}))},s.createElement("span",{className:u("icon","icon-common","icon-download"),"data-icon":""})," Download sequence (FASTA)")}},14309:(e,t,n)=>{n.d(t,{Z:()=>m});var s=n(67294),a=n(45007),r=n(87616),c=n(29643),i=n(76371),o=n(44115),l=n(82806),u=n(35395),d=(0,i.Z)(o.Z,l.Z,u.Z);const m=(0,a.$j)(null,{goToCustomLocation:r.xb})((e=>{var{goToCustomLocation:t,sequence:n,title:a,minWidth:r}=e;return s.createElement(c.Z,{to:{description:{main:{key:"search"},search:{type:"sequence"}}},onClick:e=>{e.preventDefault();var s="function"==typeof n?n():n;t({description:{main:{key:"search"},search:{type:"sequence",value:s}}})}},s.createElement("div",{className:d("sequence-link","vf-button","vf-button--secondary","vf-button--sm"),"data-icon":"",style:{minWidth:r,marginRight:"1rem"}},s.createElement("div",{className:d("shape","ips","gray")}),s.createElement("div",{className:d("shape","ips","green")}),s.createElement("div",{className:d("shape","ips","pale-green")}),s.createElement("div",{className:d("shape","ips","red")}),s.createElement("div",{className:d("shape","ips","blue")}),s.createElement("span",null,a)))}))},44264:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var s=n(67294),a=(n(752),n(73964),n(76265),n(64043),n(22462),n(57267),n(60429),n(28436),n(12826),n(45697)),r=n.n(a),c=n(45007),i=n(19119),o=n(87616),l=n(3509),u=n(14309),d=n(48189),m=n(44115),_=n(16786),p=n(21105),h=n(45913),g=(0,l.D)(h.Z,_.Z,m.Z),v=/^\s*[;>].*$/gm,q=/\s*/g,y=/.{1,10}/g,f=/(.{1,80})/g,S=10,w=(0,p.Z)({loader:()=>n.e(1169).then(n.bind(n,25392)),loading:()=>null}),E=e=>({"@id":"@additionalProperty","@type":"PropertyValue",additionalType:"hhttp://semanticscience.org/resource/SIO_000205",name:"protein sequence",value:{"@type":"StructuredValue",additionalType:["bio:BioChemEntity","http://semanticscience.org/resource/SIO_010015"],additionalProperty:{"@type":"PropertyValue",name:"length",value:e}}}),b=e=>{var{segment:t,position:n,start:a,end:r}=e,c=n+1;return s.createElement(s.Fragment,null,c<a?s.createElement("span",{className:g("light-sequence")},t.slice(0,a-c)):null,c+S>a||c+S<r?s.createElement("span",null,t.slice(a-c,r-c+1)):null,c+S>r?s.createElement("span",{className:g("light-sequence")},t.slice(r-c+1)):null)};b.propTypes={segment:r().string,position:r().number,start:r().number,end:r().number};class N extends s.PureComponent{render(){var e=this.props.sequence.replace(v,"").replace(q,"").match(y)||[],{start:t,end:n}=this.props;return s.createElement("div",{className:g("raw-sequence-viewer","row")},s.createElement(w,{data:this.props.sequence.length,processData:E}),e.map(((e,a)=>{var r=!1,c=!1,i=!1,o=!1;return void 0!==t&&void 0!==n&&(r=t>0&&t>(a+1)*S,c=n>0&&n<=a*S,i=t>0&&t+S>1+(a+1)*S&&t<=(a+1)*S,o=n>0&&n<(a+1)*S&&n>a*S),s.createElement(s.Fragment,{key:a},s.createElement("span",{className:g("sequence_word",{"light-sequence":r||c}),style:{zIndex:-a,display:"inline-block"},"data-index":a},i||o?s.createElement(b,{segment:e,start:t||0,end:n||(a+1)*S,position:a*S}):e),s.createElement("div",{className:g("sequence_word_spacer")}))})))}}N.propTypes={sequence:r().string.isRequired,start:r().number,end:r().number};class Z extends s.PureComponent{constructor(e){super(e),this._goToSelection=()=>{var{start:e,end:t}=this._getSelectionRange();this.props.goToCustomLocation(Object.assign({},this.props.customLocation,{hash:e+"-"+t}))},this._getPositionFromHash=e=>{if(/^(\d)+-(\d)+$/.test(e)){var[t,n]=e.split("-").map(Number);if(t<n)return{start:t,end:n}}return null},this._selectFromHash=()=>{var e=this.props.customLocation.hash,{start:t,end:n}=this._getSelectionRange();if(e!==t+"-"+n){var s=this._getPositionFromHash(e);if(!s)return null;var{start:a,end:r}=s,c=document.createRange(),i=document.querySelector("span[data-index='"+Math.floor((a-1)/S)+"']"),o=document.querySelector("span[data-index='"+Math.floor(r/S)+"']");i&&o&&(i.firstChild&&c.setStart(i.firstChild,(a-1)%S),o.firstChild&&c.setEnd(o.firstChild,r%S),window.getSelection().empty(),window.getSelection().addRange(c))}},this._isSelectionInSequence=e=>{if(!this._ref.current)return!1;var t=this._ref.current.contains(e.anchorNode);return!!this._ref.current&&t&&this._ref.current.contains(e.focusNode)},this._getSelectionRange=()=>{var e=this.props.sequence,t=1,n=e.length;if("getSelection"in window){var s=window.getSelection();if(this._isSelectionInSequence(s)){var a=s.toString().trim();if(!a)return{start:t,end:n};e=a.replace(/\s/gi,""),t=+s.anchorNode.parentElement.dataset.index*S+s.anchorOffset+1,n=e.length+t-1}}return{start:t,end:n}},this._getSelection=()=>{var e=this.props.sequence,{start:t,end:n}=this._getSelectionRange();e=e.slice(Math.max(0,t-1),n).replace(f,"$1\n");var s=(">"+this.props.accession+" mol:protein subsequence:"+t+"-"+n+" length:"+(n-t+1)+" "+(this.props.name||"")).trim();return encodeURIComponent(s+"\n"+e)},this._ref=s.createRef()}componentDidMount(){document.addEventListener("selectionchange",this._goToSelection),this._selectFromHash()}componentDidUpdate(){this._selectFromHash()}componentWillUnmount(){document.removeEventListener("selectionchange",this._goToSelection)}render(){var{sequence:e,accession:t,name:n}=this.props,a=t||n;return s.createElement("section",{id:"sequence"},s.createElement("div",{className:g("row","columns")},s.createElement("h5",null,"Sequence")),s.createElement("div",{className:g("row")},s.createElement("div",{className:g("small-12","medium-12","large-8","columns","margin-bottom-large"),ref:this._ref},a&&s.createElement("div",{className:g("raw-sequence-viewer","row","raw-sequence-header")},"> "+a),s.createElement(N,{sequence:e})),s.createElement("div",{className:g("small-12","medium-12","large-4","columns")},s.createElement(u.Z,{sequence:this._getSelection,title:"Search selection with InterProScan",minWidth:"302px"}),s.createElement(d.Z,{sequence:e,accession:t}))))}}Z.propTypes={sequence:r().string,goToCustomLocation:r().func.isRequired,accession:r().string.isRequired,customLocation:r().object,name:r().string};var x=(0,i.P1)((e=>e.customLocation),(e=>({customLocation:e})));const C=(0,c.$j)(x,{goToCustomLocation:o.xb})(Z),R=e=>{var t,n,a,r,c,i,{data:o,localPayload:l,localTitle:u,orf:d}=e,m=l,_=null,{loading:p,ok:h}=o,g=(null===(t=null==m?void 0:m.openReadingFrames)||void 0===t?void 0:t.length)&&void 0!==d,v=g?null===(n=null==m?void 0:m.openReadingFrames)||void 0===n?void 0:n[d]:void 0,q=null==v?void 0:v.protein;if(h&&!p&&!_&&(null==o?void 0:o.payload)&&(_=null==o?void 0:o.payload),!_&&!m)return null;if(null==_?void 0:_.metadata){var y=null==_?void 0:_.metadata;r=null==y?void 0:y.accession,c=null==y?void 0:y.sequence,i=(null===(a=null==y?void 0:y.name)||void 0===a?void 0:a.name)||(null==y?void 0:y.name)}else if(g&&q)r=q.xref[0].id||"",i=q.xref[0].name||"",c=q.sequence;else{var f=m;r=f.xref[0].id||"",i=u||f.xref[0].name||"",c=f.sequence}return s.createElement(s.Fragment,null,s.createElement(C,{accession:r,sequence:c,name:i}),g&&q&&s.createElement("section",{id:"nucleotides"},s.createElement("h5",null,"Nucleotide Sequence"),s.createElement(N,{sequence:null==m?void 0:m.sequence,start:v.start,end:v.end,name:q.xref[0].name})))}},80866:(e,t,n)=>{n.d(t,{P:()=>s}),n(64043),n(57267),n(28436);var s=function(e,t,n){void 0===n&&(n=!0);var s=e.length,a=e.slice(Math.max(0,0),s).replace(/(.{1,80})/g,"$1\n"),r=(">"+t+" 1-"+s).trim()+"\n"+a;return n?encodeURIComponent(r):r}},44115:(e,t,n)=>{n.d(t,{Z:()=>s});const s={"raw-sequence-viewer":"Sequence_style__raw-sequence-viewer___c9","raw-sequence-header":"Sequence_style__raw-sequence-header___f1",sequence_word:"Sequence_style__sequence_word___c7","light-sequence":"Sequence_style__light-sequence___a6",sequence_word_spacer:"Sequence_style__sequence_word_spacer___d7","sequence-link":"Sequence_style__sequence-link___e1",shape:"Sequence_style__shape___fb",hmmer:"Sequence_style__hmmer___db",yellow:"Sequence_style__yellow___a9",red:"Sequence_style__red___e5",blue:"Sequence_style__blue___cb",ips:"Sequence_style__ips___d0",gray:"Sequence_style__gray___ec",green:"Sequence_style__green___d3","pale-green":"Sequence_style__pale-green___ff"}},5931:(e,t,n)=>{n.d(t,{Z:()=>s});const s={"summary-row":"styles_summary__summary-row___b3","summary-grid":"styles_summary__summary-grid___b5"}}}]);
//# sourceMappingURL=8662.module.sequence-subpage.657.js.map